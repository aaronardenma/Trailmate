<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:36,&quot;tests&quot;:66,&quot;passes&quot;:66,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-07-07T04:00:30.822Z&quot;,&quot;end&quot;:&quot;2025-07-07T04:01:17.287Z&quot;,&quot;duration&quot;:46465,&quot;testsRegistered&quot;:66,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;8280b703-39b0-40f0-9890-f6e8328ed36b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Trails.deleteMany({});\nconst inserted = await Trails.insertMany(sampleTrails);\ntrailId = inserted[0]._id.toString();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8f7f9f0-839e-412f-981e-a0ef39766bdf&quot;,&quot;parentUUID&quot;:&quot;8280b703-39b0-40f0-9890-f6e8328ed36b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Trails.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5ca7c2a-a4c4-49f4-aaa2-5b25fd30bc6b&quot;,&quot;parentUUID&quot;:&quot;8280b703-39b0-40f0-9890-f6e8328ed36b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;00b8ba3e-2333-4d99-948f-45e346675f12&quot;,&quot;title&quot;:&quot;Comment API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\comment.test.js&quot;,&quot;file&quot;:&quot;\\test\\comment.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes \&quot;before each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:480,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Post.deleteMany({});\nawait Comment.deleteMany({});\nuser = await User.create({\n    firstName: &#x27;Test&#x27;,\n    lastName: &#x27;User&#x27;,\n    email: &#x27;test@example.com&#x27;,\n    password: &#x27;password123&#x27;\n});\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;, { expiresIn: &#x27;1h&#x27; });\npost = await Post.create({\n    userId: user._id,\n    title: &#x27;Test Post&#x27;,\n    description: &#x27;Post description&#x27;,\n    photoUrl: &#x27;&#x27;,\n    likes: 0,\n    likedByUsers: []\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60215916-76e0-4736-ae62-8acecf10bab6&quot;,&quot;parentUUID&quot;:&quot;00b8ba3e-2333-4d99-948f-45e346675f12&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes \&quot;after each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Post.deleteMany({});\nawait Comment.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc24a352-b50c-41ef-b683-754af1f0b2f0&quot;,&quot;parentUUID&quot;:&quot;00b8ba3e-2333-4d99-948f-45e346675f12&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ee7215b4-bc3f-4232-ba93-e7c5985f097a&quot;,&quot;title&quot;:&quot;POST /api/comments/add/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\comment.test.js&quot;,&quot;file&quot;:&quot;\\test\\comment.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should successfully add a comment to a post&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes POST /api/comments/add/:postId should successfully add a comment to a post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const commentText = &#x27;This is a test comment&#x27;;\nconst res = await chai\n    .request(app)\n    .post(`/api/comments/add/${post._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ comment: commentText });\nexpect(res).to.have.status(201);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Comment added successfully&#x27;);\nexpect(res.body.comment).to.include({\n    comment: commentText,\n    postID: post._id.toString(),\n    userID: user._id.toString(),\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83999c01-66f0-4300-8961-337a639f948e&quot;,&quot;parentUUID&quot;:&quot;ee7215b4-bc3f-4232-ba93-e7c5985f097a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail without a valid token&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes POST /api/comments/add/:postId should fail without a valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .post(`/api/comments/add/${post._id}`)\n    .send({ comment: &#x27;No token comment&#x27; });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd134f88-310f-4195-b985-02be79109142&quot;,&quot;parentUUID&quot;:&quot;ee7215b4-bc3f-4232-ba93-e7c5985f097a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for empty comment&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes POST /api/comments/add/:postId should return 400 for empty comment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .post(`/api/comments/add/${post._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ comment: &#x27;&#x27; });\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f606c97b-b05b-4b98-8e71-46c033a9b026&quot;,&quot;parentUUID&quot;:&quot;ee7215b4-bc3f-4232-ba93-e7c5985f097a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83999c01-66f0-4300-8961-337a639f948e&quot;,&quot;cd134f88-310f-4195-b985-02be79109142&quot;,&quot;f606c97b-b05b-4b98-8e71-46c033a9b026&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:152,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;9c4bd29f-d05f-4219-b9db-508a139e1848&quot;,&quot;title&quot;:&quot;GET /api/comments/post/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\comment.test.js&quot;,&quot;file&quot;:&quot;\\test\\comment.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve comments for a post&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes GET /api/comments/post/:postId should retrieve comments for a post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Comment.create({\n    userID: user._id,\n    postID: post._id,\n    comment: &#x27;Nice post!&#x27;\n});\nconst res = await chai\n    .request(app)\n    .get(`/api/comments/post/${post._id}`);\nexpect(res).to.have.status(200);\nexpect(res.body.comments).to.be.an(&#x27;array&#x27;);\nexpect(res.body.comments[0]).to.have.property(&#x27;comment&#x27;, &#x27;Nice post!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e577daa1-ec04-4501-8433-042552c7986c&quot;,&quot;parentUUID&quot;:&quot;9c4bd29f-d05f-4219-b9db-508a139e1848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for invalid post ID format&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes GET /api/comments/post/:postId should return 400 for invalid post ID format&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(`/api/comments/post/invalid123`);\nexpect(res).to.have.status(400);\nexpect(res.body).to.have.property(&#x27;error&#x27;, &#x27;Invalid post ID format&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3349282-e405-46d3-ad57-a2d88fcd17e1&quot;,&quot;parentUUID&quot;:&quot;9c4bd29f-d05f-4219-b9db-508a139e1848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return empty array if no comments exist&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes GET /api/comments/post/:postId should return empty array if no comments exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(`/api/comments/post/${post._id}`);\nexpect(res).to.have.status(200);\nexpect(res.body.comments).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28144d92-071a-4efb-a710-2f10d0a42c64&quot;,&quot;parentUUID&quot;:&quot;9c4bd29f-d05f-4219-b9db-508a139e1848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e577daa1-ec04-4501-8433-042552c7986c&quot;,&quot;b3349282-e405-46d3-ad57-a2d88fcd17e1&quot;,&quot;28144d92-071a-4efb-a710-2f10d0a42c64&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:109,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;d3f23d85-9706-45e6-a391-dcfe22bc0f04&quot;,&quot;title&quot;:&quot;Favorite API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes \&quot;before each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:535,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.deleteMany({});\nawait User.deleteMany({});\nuser = await User.create({\n    firstName: &#x27;Test&#x27;,\n    lastName: &#x27;User&#x27;,\n    email: &#x27;favorite@example.com&#x27;,\n    password: &#x27;password123&#x27;\n});\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;, { expiresIn: &#x27;1h&#x27; });\ntrail = await Trail.create( {\n    name: \&quot;Oceanview Path\&quot;,\n    latitude: 49.2700,\n    longitude: -123.1250,\n    photoUrl: \&quot;https://example.com/trails/oceanview.jpg\&quot;,\n    location: \&quot;Burnaby\&quot;,\n    description: \&quot;Moderate trail with breathtaking views of the ocean.\&quot;,\n    avgElevationM: 280,\n    difficulty: \&quot;Moderate\&quot;,\n    distanceKm: 6.1,\n    tags: []\n})\ntrailID = trail._id&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;857278f0-b18d-425e-b3a2-c9cd5f273e62&quot;,&quot;parentUUID&quot;:&quot;d3f23d85-9706-45e6-a391-dcfe22bc0f04&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes \&quot;after each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.deleteMany({});\nawait User.deleteMany({});\nawait Trail.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae5b8a0b-cb73-43c1-a587-d6fc82ea7d74&quot;,&quot;parentUUID&quot;:&quot;d3f23d85-9706-45e6-a391-dcfe22bc0f04&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3070f981-cc04-48cf-96fd-def76885303d&quot;,&quot;title&quot;:&quot;POST /api/favorites/addFavorite&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a trail to favorites&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/addFavorite should add a trail to favorites&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/addFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(201);\nconsole.log(res.body.message)\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Favorite added successfully&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17ced9e4-9cab-4b31-9680-7b702b76613b&quot;,&quot;parentUUID&quot;:&quot;3070f981-cc04-48cf-96fd-def76885303d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if trailID is missing&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/addFavorite should return 400 if trailID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/addFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({});\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a26b3147-24ca-4398-bd4e-2b711cc565ed&quot;,&quot;parentUUID&quot;:&quot;3070f981-cc04-48cf-96fd-def76885303d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 409 if trail already exists in favorites&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/addFavorite should return 409 if trail already exists in favorites&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .post(&#x27;/api/favorite/addFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29a53842-aa75-4061-81ab-28d982ec7d9e&quot;,&quot;parentUUID&quot;:&quot;3070f981-cc04-48cf-96fd-def76885303d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;17ced9e4-9cab-4b31-9680-7b702b76613b&quot;,&quot;a26b3147-24ca-4398-bd4e-2b711cc565ed&quot;,&quot;29a53842-aa75-4061-81ab-28d982ec7d9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:135,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;3ca82e1d-2f95-49b5-8549-c2e63aeaa296&quot;,&quot;title&quot;:&quot;GET /api/favorites/getFavoriteTrails&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return favorite trails for the user&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes GET /api/favorites/getFavoriteTrails should return favorite trails for the user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .get(&#x27;/api/favorite/getFavoriteTrails&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nexpect(res.body[0].trailID.toString()).to.equal(trailID.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b3bcc30-6983-46ad-ac32-f0e0d49466ba&quot;,&quot;parentUUID&quot;:&quot;3ca82e1d-2f95-49b5-8549-c2e63aeaa296&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b3bcc30-6983-46ad-ac32-f0e0d49466ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;13e85e1d-4163-4dae-8370-0e8ee5f0edeb&quot;,&quot;title&quot;:&quot;POST /api/favorites/isFavorite&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if trail is favorited&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/isFavorite should return true if trail is favorited&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .post(&#x27;/api/favorite/isFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;isFavorite&#x27;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ae17bdb-81e1-4843-8bf2-d26ef4bdb3bd&quot;,&quot;parentUUID&quot;:&quot;13e85e1d-4163-4dae-8370-0e8ee5f0edeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if trail is not favorited&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/isFavorite should return false if trail is not favorited&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/isFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID: trailID });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;isFavorite&#x27;, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0f60eb2-1ea2-4791-ab7d-bc0695271a12&quot;,&quot;parentUUID&quot;:&quot;13e85e1d-4163-4dae-8370-0e8ee5f0edeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if trailID is missing&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/isFavorite should return 400 if trailID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/isFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({});\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4caae097-4de9-4281-b9f1-7906854c1bf0&quot;,&quot;parentUUID&quot;:&quot;13e85e1d-4163-4dae-8370-0e8ee5f0edeb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ae17bdb-81e1-4843-8bf2-d26ef4bdb3bd&quot;,&quot;f0f60eb2-1ea2-4791-ab7d-bc0695271a12&quot;,&quot;4caae097-4de9-4281-b9f1-7906854c1bf0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:108,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;6570c0a9-1eec-4852-ba50-0a9b1ab0e564&quot;,&quot;title&quot;:&quot;DELETE /api/favorites/deleteFavorite&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a favorite trail&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes DELETE /api/favorites/deleteFavorite should remove a favorite trail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .delete(&#x27;/api/favorite/deleteFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Favorite removed successfully&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16bdc9ce-b01e-443c-a2f2-1a763be66a80&quot;,&quot;parentUUID&quot;:&quot;6570c0a9-1eec-4852-ba50-0a9b1ab0e564&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if trail is not found&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes DELETE /api/favorites/deleteFavorite should return 404 if trail is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .delete(&#x27;/api/favorite/deleteFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9476bd5b-99fe-48a7-aadd-f0d42351c4e4&quot;,&quot;parentUUID&quot;:&quot;6570c0a9-1eec-4852-ba50-0a9b1ab0e564&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if trailID is missing&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes DELETE /api/favorites/deleteFavorite should return 400 if trailID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .delete(&#x27;/api/favorite/deleteFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({});\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ddc659c-e35a-470b-9718-cbc39431f54a&quot;,&quot;parentUUID&quot;:&quot;6570c0a9-1eec-4852-ba50-0a9b1ab0e564&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16bdc9ce-b01e-443c-a2f2-1a763be66a80&quot;,&quot;9476bd5b-99fe-48a7-aadd-f0d42351c4e4&quot;,&quot;2ddc659c-e35a-470b-9718-cbc39431f54a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;ad701188-22a4-464b-871c-8d6e25b00e2b&quot;,&quot;title&quot;:&quot;Gear API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\gear.test.js&quot;,&quot;file&quot;:&quot;\\test\\gear.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes \&quot;before each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Gear.deleteMany({});\nawait Gear.insertMany(sampleGear);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45976116-f85c-416f-80a0-6a0fb262ff94&quot;,&quot;parentUUID&quot;:&quot;ad701188-22a4-464b-871c-8d6e25b00e2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes \&quot;after each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Gear.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83cc644e-12c6-4c89-b1af-42e8a4f33277&quot;,&quot;parentUUID&quot;:&quot;ad701188-22a4-464b-871c-8d6e25b00e2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all gear items&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes should return all gear items&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(app)\n    .get(&#x27;/api/gear&#x27;)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;array&#x27;);\n        expect(res.body.length).to.equal(2);\n        console.log(res.body[0])\n        expect(res.body[0]).to.have.property(&#x27;category&#x27;);\n        expect(res.body[0]).to.have.property(&#x27;items&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2575ef7a-fc4e-482e-882f-987061684da8&quot;,&quot;parentUUID&quot;:&quot;ad701188-22a4-464b-871c-8d6e25b00e2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array if no gear exists&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes should return an empty array if no gear exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Gear.deleteMany({});\nconst res = await chai.request(app).get(&#x27;/api/gear&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4c95709-1f66-4329-aa43-06728dccbca1&quot;,&quot;parentUUID&quot;:&quot;ad701188-22a4-464b-871c-8d6e25b00e2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2575ef7a-fc4e-482e-882f-987061684da8&quot;,&quot;b4c95709-1f66-4329-aa43-06728dccbca1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:98,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;114b8737-2965-474c-aa42-b987b504da83&quot;,&quot;title&quot;:&quot;Post API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Post API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Post API \&quot;before each\&quot; hook in \&quot;Post API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:521,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Post.deleteMany({});\nconst user = new User({\n    email: &#x27;test@example.com&#x27;,\n    password: &#x27;password123&#x27;,\n    firstName: &#x27;Test&#x27;,\n    lastName: &#x27;User&#x27;,\n    gender: &#x27;male&#x27;,\n    visibility: &#x27;public&#x27;\n});\nawait user.save();\nuserId = user._id.toString();\ntoken = jwt.sign({ id: userId, email: user.email }, process.env.JWT_SECRET, {\n    expiresIn: &#x27;1h&#x27;\n});\nconst post = await Post.create({\n    userId,\n    title: &#x27;Initial Post&#x27;,\n    description: &#x27;Initial Description&#x27;,\n    dateOfPost: new Date(),\n    likedByUsers: [],\n    comments: [],\n    likes: 0,\n    photoUrl: &#x27;&#x27;\n});\npostId = post._id.toString();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14558c99-5a23-4c39-a7ee-78cd940958d5&quot;,&quot;parentUUID&quot;:&quot;114b8737-2965-474c-aa42-b987b504da83&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;08eb8b46-61b7-4e5b-86b9-560e9797b968&quot;,&quot;title&quot;:&quot;GET /getPosts&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all posts with user info and respect user visibility&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPosts should return all posts with user info and respect user visibility&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.findByIdAndUpdate(userId, {\n    visibility: &#x27;private&#x27;,\n    firstName: &#x27;John&#x27;,\n    lastName: &#x27;Doe&#x27;,\n    gender: &#x27;male&#x27;\n});\nconst res = await chai.request(app).get(&#x27;/getPosts&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nconst post = res.body[0];\nexpect(post).to.have.property(&#x27;userId&#x27;);\nexpect(post.userId).to.include.keys(&#x27;_id&#x27;, &#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;gender&#x27;);\nexpect(post.userId).to.not.have.property(&#x27;email&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f876037-36be-49de-8d2d-b66e8faa6771&quot;,&quot;parentUUID&quot;:&quot;08eb8b46-61b7-4e5b-86b9-560e9797b968&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should include full user info if visibility is public&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPosts should include full user info if visibility is public&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.findByIdAndUpdate(userId, { visibility: &#x27;public&#x27; });\nconst res = await chai.request(app).get(&#x27;/getPosts&#x27;);\nexpect(res).to.have.status(200);\nconst post = res.body[0];\nexpect(post.userId).to.have.property(&#x27;email&#x27;, &#x27;test@example.com&#x27;);\nexpect(post.userId).to.have.property(&#x27;firstName&#x27;, &#x27;Test&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bb9e355-0950-494e-8a76-41635d89b1f0&quot;,&quot;parentUUID&quot;:&quot;08eb8b46-61b7-4e5b-86b9-560e9797b968&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2f876037-36be-49de-8d2d-b66e8faa6771&quot;,&quot;7bb9e355-0950-494e-8a76-41635d89b1f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:81,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;10bea040-d92f-435b-abc4-7a58809ca030&quot;,&quot;title&quot;:&quot;GET /getPostsForUser/&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return posts belonging to the authenticated user&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPostsForUser/ should return posts belonging to the authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(&#x27;/getPostsForUser/&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nexpect(res.body.some(p =&gt; p._id === postId)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70df70eb-d71f-4b32-b4e0-f5e3feb2a6d0&quot;,&quot;parentUUID&quot;:&quot;10bea040-d92f-435b-abc4-7a58809ca030&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 if no token provided&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPostsForUser/ should return 401 if no token provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).get(&#x27;/getPostsForUser/&#x27;);\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27ab5af5-2598-4b4b-851d-d05ab8132aa5&quot;,&quot;parentUUID&quot;:&quot;10bea040-d92f-435b-abc4-7a58809ca030&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70df70eb-d71f-4b32-b4e0-f5e3feb2a6d0&quot;,&quot;27ab5af5-2598-4b4b-851d-d05ab8132aa5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:44,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;2a93ed52-362a-4fac-8b62-0c4dc15307c3&quot;,&quot;title&quot;:&quot;POST /add&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a post for authenticated user&quot;,&quot;fullTitle&quot;:&quot;Post API POST /add should create a post for authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const postPayload = {\n    title: &#x27;New post&#x27;,\n    description: &#x27;Post description&#x27;,\n    photoUrl: &#x27;http://example.com/image.png&#x27;\n};\nconst res = await chai\n    .request(app)\n    .post(&#x27;/add&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send(postPayload);\nexpect(res).to.have.status(201);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Post created successfully&#x27;);\nexpect(res.body.post).to.include(postPayload);\nexpect(res.body.post).to.have.property(&#x27;userId&#x27;, userId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b16aca76-1eeb-4130-85c8-ab6bcac29ef6&quot;,&quot;parentUUID&quot;:&quot;2a93ed52-362a-4fac-8b62-0c4dc15307c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 without token&quot;,&quot;fullTitle&quot;:&quot;Post API POST /add should return 401 without token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).post(&#x27;/add&#x27;).send({ title: &#x27;x&#x27; });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53755cbd-8990-4acd-9b73-21154dd30a14&quot;,&quot;parentUUID&quot;:&quot;2a93ed52-362a-4fac-8b62-0c4dc15307c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b16aca76-1eeb-4130-85c8-ab6bcac29ef6&quot;,&quot;53755cbd-8990-4acd-9b73-21154dd30a14&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:69,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;86ea5d2f-0ad6-4df9-8c6d-f91757cb28be&quot;,&quot;title&quot;:&quot;PUT /updatePost/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update an existing post&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePost/:postId should update an existing post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatePayload = {\n    title: &#x27;Updated title&#x27;,\n    description: &#x27;Updated desc&#x27;,\n    photoUrl: &#x27;http://example.com/updated.png&#x27;,\n    likes: 5,\n    comments: [&#x27;Nice!&#x27;]\n};\nconst res = await chai\n    .request(app)\n    .put(`/updatePost/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send(updatePayload);\nexpect(res).to.have.status(201);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Post created successfully&#x27;);\nexpect(res.body.post.title).to.equal(updatePayload.title);\nexpect(res.body.post.description).to.equal(updatePayload.description);\nexpect(res.body.post.photoUrl).to.equal(updatePayload.photoUrl);\nexpect(res.body.post.likes).to.equal(updatePayload.likes);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d020eb10-9dc9-4c81-ba7c-5f2688ec9268&quot;,&quot;parentUUID&quot;:&quot;86ea5d2f-0ad6-4df9-8c6d-f91757cb28be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 without token&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePost/:postId should return 401 without token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).put(`/updatePost/${postId}`).send({ title: &#x27;x&#x27; });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93965fbf-0826-473c-a149-0061455af6bd&quot;,&quot;parentUUID&quot;:&quot;86ea5d2f-0ad6-4df9-8c6d-f91757cb28be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d020eb10-9dc9-4c81-ba7c-5f2688ec9268&quot;,&quot;93965fbf-0826-473c-a149-0061455af6bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:52,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;0d89e392-45f1-49f3-a991-9728ab9eebd6&quot;,&quot;title&quot;:&quot;PUT /updatePostLikes/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should like a post if not already liked&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostLikes/:postId should like a post if not already liked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .put(`/updatePostLikes/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;You liked this post!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99650c17-be41-4d0f-be6d-a41ac05bc68c&quot;,&quot;parentUUID&quot;:&quot;0d89e392-45f1-49f3-a991-9728ab9eebd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should unlike the post if already liked&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostLikes/:postId should unlike the post if already liked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:161,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await chai\n    .request(app)\n    .put(`/updatePostLikes/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nconst res = await chai\n    .request(app)\n    .put(`/updatePostLikes/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;You unliked this post.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;203e39a0-5c6f-4079-951a-79b5cbf3962d&quot;,&quot;parentUUID&quot;:&quot;0d89e392-45f1-49f3-a991-9728ab9eebd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if post does not exist&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostLikes/:postId should return 404 if post does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .put(&#x27;/updatePostLikes/507f1f77bcf86cd799439011&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;Post not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9b1ce4e-59a6-45fe-b5c5-3eb708becfda&quot;,&quot;parentUUID&quot;:&quot;0d89e392-45f1-49f3-a991-9728ab9eebd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99650c17-be41-4d0f-be6d-a41ac05bc68c&quot;,&quot;203e39a0-5c6f-4079-951a-79b5cbf3962d&quot;,&quot;f9b1ce4e-59a6-45fe-b5c5-3eb708becfda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:242,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;381ef431-d0e6-4f6d-8f0e-58a42ab7c62d&quot;,&quot;title&quot;:&quot;PUT /updatePostComments/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500 if error occurs&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostComments/:postId should return 500 if error occurs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .put(&#x27;/updatePostComments/invalidid&#x27;)\n    .send({ comments: { currentUserComments: &#x27;test&#x27; } });\nexpect(res).to.have.status(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41e326bc-4ecf-4c31-a10f-0516a4e130cb&quot;,&quot;parentUUID&quot;:&quot;381ef431-d0e6-4f6d-8f0e-58a42ab7c62d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41e326bc-4ecf-4c31-a10f-0516a4e130cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;b46b75fd-3d90-4315-a56d-bd3ec6825c65&quot;,&quot;title&quot;:&quot;DELETE /deletePost/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the post&quot;,&quot;fullTitle&quot;:&quot;Post API DELETE /deletePost/:id should delete the post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newPost = await Post.create({\n    userId,\n    title: &#x27;To be deleted&#x27;,\n    description: &#x27;Delete me&#x27;,\n    dateOfPost: new Date(),\n    likedByUsers: [],\n    photoUrl: &#x27;&#x27;\n});\nconst res = await chai.request(app).delete(`/deletePost/${newPost._id}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;Post deleted successfully&#x27;);\nexpect(res.body.user._id).to.equal(newPost._id.toString());\nconst deleted = await Post.findById(newPost._id);\nexpect(deleted).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a183803-fb1f-498c-927b-1654c12bd03d&quot;,&quot;parentUUID&quot;:&quot;b46b75fd-3d90-4315-a56d-bd3ec6825c65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if post not found&quot;,&quot;fullTitle&quot;:&quot;Post API DELETE /deletePost/:id should return 404 if post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).delete(&#x27;/deletePost/507f1f77bcf86cd799439011&#x27;);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;Post not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b273439d-3909-4ec5-9078-a23fa4876394&quot;,&quot;parentUUID&quot;:&quot;b46b75fd-3d90-4315-a56d-bd3ec6825c65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a183803-fb1f-498c-927b-1654c12bd03d&quot;,&quot;b273439d-3909-4ec5-9078-a23fa4876394&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:86,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;40533a7b-f34e-40b0-b7af-1e70aae4a627&quot;,&quot;title&quot;:&quot;GET /postLikeStatus/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return liked: true if user liked the post&quot;,&quot;fullTitle&quot;:&quot;Post API GET /postLikeStatus/:postId should return liked: true if user liked the post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const post = await Post.findById(postId);\npost.likedByUsers = [userId];\nawait post.save();\nconst res = await chai\n    .request(app)\n    .get(`/postLikeStatus/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.liked).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;883a8f58-3e5f-488c-8d78-a97b7b53b20f&quot;,&quot;parentUUID&quot;:&quot;40533a7b-f34e-40b0-b7af-1e70aae4a627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return liked: false if user did not like the post&quot;,&quot;fullTitle&quot;:&quot;Post API GET /postLikeStatus/:postId should return liked: false if user did not like the post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:185,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const post = await Post.findById(postId);\npost.likedByUsers = [];\nawait post.save();\nconst res = await chai\n    .request(app)\n    .get(`/postLikeStatus/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.liked).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;432d9324-a024-4e0a-bebe-fc0dd86964e6&quot;,&quot;parentUUID&quot;:&quot;40533a7b-f34e-40b0-b7af-1e70aae4a627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if post not found&quot;,&quot;fullTitle&quot;:&quot;Post API GET /postLikeStatus/:postId should return 404 if post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(&#x27;/postLikeStatus/507f1f77bcf86cd799439011&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cbf1970-c182-420e-923b-f45d5ed2ce3d&quot;,&quot;parentUUID&quot;:&quot;40533a7b-f34e-40b0-b7af-1e70aae4a627&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;883a8f58-3e5f-488c-8d78-a97b7b53b20f&quot;,&quot;432d9324-a024-4e0a-bebe-fc0dd86964e6&quot;,&quot;0cbf1970-c182-420e-923b-f45d5ed2ce3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:289,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;ed26c1f9-0c0d-4289-86f7-536b7e1fe2aa&quot;,&quot;title&quot;:&quot;Tag API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\tags.test.js&quot;,&quot;file&quot;:&quot;\\test\\tags.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Tag API \&quot;before each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Tag.deleteMany({});\nawait Tag.insertMany(sampleTags);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56867af3-8648-4984-b12f-6b057c9222e6&quot;,&quot;parentUUID&quot;:&quot;ed26c1f9-0c0d-4289-86f7-536b7e1fe2aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Tag API \&quot;after each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Tag.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c27d338-8a04-4830-97ed-68376204a5b8&quot;,&quot;parentUUID&quot;:&quot;ed26c1f9-0c0d-4289-86f7-536b7e1fe2aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9755887b-87b6-447b-8a54-033540703990&quot;,&quot;title&quot;:&quot;GET /api/tags&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\tags.test.js&quot;,&quot;file&quot;:&quot;\\test\\tags.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all tags&quot;,&quot;fullTitle&quot;:&quot;Tag API GET /api/tags should return all tags&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).get(&#x27;/api/tags&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nexpect(res.body.length).to.equal(2);\nexpect(res.body[0]).to.have.property(&#x27;name&#x27;);\nexpect(res.body[0]).to.have.property(&#x27;name&#x27;, &#x27;Scenic&#x27;);\nexpect(res.body[1]).to.have.property(&#x27;name&#x27;, &#x27;Challenging&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a60d4af-5b76-4927-91fb-d1b3a46e2d7f&quot;,&quot;parentUUID&quot;:&quot;9755887b-87b6-447b-8a54-033540703990&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array when no tags exist&quot;,&quot;fullTitle&quot;:&quot;Tag API GET /api/tags should return an empty array when no tags exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Tag.deleteMany({});\nconst res = await chai.request(app).get(&#x27;/api/tags&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a0e0967-d62a-4d29-abe6-d61c39dedede&quot;,&quot;parentUUID&quot;:&quot;9755887b-87b6-447b-8a54-033540703990&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a60d4af-5b76-4927-91fb-d1b3a46e2d7f&quot;,&quot;2a0e0967-d62a-4d29-abe6-d61c39dedede&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:123,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;e3215373-101b-4cd3-bbd9-c0b916f8188f&quot;,&quot;title&quot;:&quot;Trail API Test Collection&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trails.test.js&quot;,&quot;file&quot;:&quot;\\test\\trails.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all 5 trails&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection should get all 5 trails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:167,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .get(&#x27;/api/trails/getTrails&#x27;)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;array&#x27;).with.lengthOf(4);\n        expect(res.body[0]).to.include.keys(\n            &#x27;_id&#x27;, &#x27;name&#x27;, &#x27;latitude&#x27;, &#x27;longitude&#x27;, &#x27;photoUrl&#x27;, &#x27;location&#x27;,\n            &#x27;description&#x27;, &#x27;avgElevationM&#x27;, &#x27;difficulty&#x27;, &#x27;distanceKm&#x27;, &#x27;tags&#x27;\n        );\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a1da652-8e0e-4239-a3b3-9f2a56bdfa51&quot;,&quot;parentUUID&quot;:&quot;e3215373-101b-4cd3-bbd9-c0b916f8188f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;180bae67-f3ea-4e7c-814e-d4ac946451f2&quot;,&quot;title&quot;:&quot;POST /addTrail&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trails.test.js&quot;,&quot;file&quot;:&quot;\\test\\trails.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new trail&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection POST /addTrail should create a new trail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trails/addTrail&#x27;)\n    .send({\n        name: \&quot;New Trail\&quot;,\n        distanceKm: 4.2,\n        avgElevationM: 200,\n        timeMinutes: 60,\n        location: \&quot;Somewhere\&quot;,\n        photoUrl: \&quot;http://example.com/new.jpg\&quot;,\n        description: \&quot;Just testing.\&quot;,\n        latitude: 49.0,\n        longitude: -123.0,\n        tags: []\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(201);\n        expect(res.body.message).to.equal(\&quot;Trail added successfully\&quot;);\n        expect(res.body.trail).to.include({ name: \&quot;New Trail\&quot; });\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41f13008-1234-4de4-b726-051cf563cd73&quot;,&quot;parentUUID&quot;:&quot;180bae67-f3ea-4e7c-814e-d4ac946451f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41f13008-1234-4de4-b726-051cf563cd73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;b213de48-a7d4-4b1d-a850-d155b04bbf42&quot;,&quot;title&quot;:&quot;GET /getTrailById/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trails.test.js&quot;,&quot;file&quot;:&quot;\\test\\trails.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should fetch a trail by valid ID&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection GET /getTrailById/:id should fetch a trail by valid ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .get(`/api/trails/getTrailById/${trailId}`)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;_id&#x27;, trailId);\n        expect(res.body.name).to.equal(\&quot;Sunset Ridge Trail\&quot;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d74ebe2c-7e0f-4fa8-9c49-2ff03979d902&quot;,&quot;parentUUID&quot;:&quot;b213de48-a7d4-4b1d-a850-d155b04bbf42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for non-existing ID&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection GET /getTrailById/:id should return 404 for non-existing ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeId = new mongoose.Types.ObjectId();\nchai.request(server)\n    .get(`/api/trails/getTrailById/${fakeId}`)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(404);\n        expect(res.body.message).to.equal(&#x27;Trail not found&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e4580c8-525c-49a7-b51d-c4cf6a1d2a0b&quot;,&quot;parentUUID&quot;:&quot;b213de48-a7d4-4b1d-a850-d155b04bbf42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d74ebe2c-7e0f-4fa8-9c49-2ff03979d902&quot;,&quot;5e4580c8-525c-49a7-b51d-c4cf6a1d2a0b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:100,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[&quot;0a1da652-8e0e-4239-a3b3-9f2a56bdfa51&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:167,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;4bc66bb7-ab7c-49f4-ad0e-fc2510a47952&quot;,&quot;title&quot;:&quot;Trip API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes \&quot;before each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:957,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Trail.deleteMany({});\nawait Trip.deleteMany({});\nuser = await User.create({ username: &#x27;testuser&#x27;, email: &#x27;test@example.com&#x27;, password: &#x27;testpassword123&#x27; });\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;, { expiresIn: &#x27;1h&#x27; });\ntrail = await Trail.create(sampleTrail);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccdb93cb-8de0-4052-805c-6806db7d1f4e&quot;,&quot;parentUUID&quot;:&quot;4bc66bb7-ab7c-49f4-ad0e-fc2510a47952&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes \&quot;after each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Trail.deleteMany({});\nawait Trip.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7aa12c9a-d8d6-4083-b7b0-9a6016a24023&quot;,&quot;parentUUID&quot;:&quot;4bc66bb7-ab7c-49f4-ad0e-fc2510a47952&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1d6e113b-aefc-4788-9b2c-7c6123f76327&quot;,&quot;title&quot;:&quot;POST /save&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a new trip with status \&quot;Upcoming\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /save should save a new trip with status \&quot;Upcoming\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/save&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        endDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(201);\n        expect(res.body.message).to.equal(&#x27;Trip saved successfully!&#x27;);\n        expect(res.body.trip.status).to.equal(&#x27;Upcoming&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb71d7ae-33ca-420f-9656-00d3f958f931&quot;,&quot;parentUUID&quot;:&quot;1d6e113b-aefc-4788-9b2c-7c6123f76327&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return error when required fields are missing&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /save should return error when required fields are missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/save&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(400);\n        expect(res.body.success).to.equal(false);\n        expect(res.body.message).to.equal(&#x27;Trail ID, start date, end date, and time are required&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457d48ea-9e02-434e-95d4-b097bb9f8d34&quot;,&quot;parentUUID&quot;:&quot;1d6e113b-aefc-4788-9b2c-7c6123f76327&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb71d7ae-33ca-420f-9656-00d3f958f931&quot;,&quot;457d48ea-9e02-434e-95d4-b097bb9f8d34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:53,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;0b7a893e-22ee-459c-ab81-c2a4912eacd2&quot;,&quot;title&quot;:&quot;POST /start&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should start a new trip with status \&quot;In Progress\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /start should start a new trip with status \&quot;In Progress\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/start&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        endDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(201);\n        expect(res.body.message).to.equal(&#x27;Trip started successfully!&#x27;);\n        expect(res.body.trip.status).to.equal(&#x27;In Progress&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef5aad50-41d9-4dc9-a3ba-11f0009d8609&quot;,&quot;parentUUID&quot;:&quot;0b7a893e-22ee-459c-ab81-c2a4912eacd2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return error if the trip has no required fields&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /start should return error if the trip has no required fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/start&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(400);\n        expect(res.body.success).to.equal(false);\n        expect(res.body.message).to.equal(&#x27;Trail ID, start date, end date, and time are required&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b7db549-4629-4af3-b71d-d764cc9b6597&quot;,&quot;parentUUID&quot;:&quot;0b7a893e-22ee-459c-ab81-c2a4912eacd2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef5aad50-41d9-4dc9-a3ba-11f0009d8609&quot;,&quot;2b7db549-4629-4af3-b71d-d764cc9b6597&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:96,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;2a78cfd6-b9d6-44f9-8fae-7ece941ef672&quot;,&quot;title&quot;:&quot;GET /&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve all user trips&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes GET / should retrieve all user trips&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .get(&#x27;/api/trips/&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nexpect(res.body.trips).to.be.an(&#x27;array&#x27;).with.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2de385f-8bf8-4ef0-a543-9646a17adfde&quot;,&quot;parentUUID&quot;:&quot;2a78cfd6-b9d6-44f9-8fae-7ece941ef672&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array if the user has no trips&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes GET / should return an empty array if the user has no trips&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .get(&#x27;/api/trips/&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body.success).to.be.true;\n        expect(res.body.trips).to.be.an(&#x27;array&#x27;).that.is.empty;\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c82ffb71-023a-4c12-abc5-b77fd3c628c7&quot;,&quot;parentUUID&quot;:&quot;2a78cfd6-b9d6-44f9-8fae-7ece941ef672&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2de385f-8bf8-4ef0-a543-9646a17adfde&quot;,&quot;c82ffb71-023a-4c12-abc5-b77fd3c628c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:159,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;01dd6733-f8cd-4e59-ad39-19e119d1a54f&quot;,&quot;title&quot;:&quot;PUT /updateStatus/:tripId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update the trip status&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes PUT /updateStatus/:tripId should update the trip status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trip = await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .put(`/api/trips/updateStatus/${trip._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ status: &#x27;Completed&#x27; });\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;Trip status updated successfully&#x27;);\nexpect(res.body.trip.status).to.equal(&#x27;Completed&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c9c8c01-edcf-4d2f-bd13-64b5a65fd865&quot;,&quot;parentUUID&quot;:&quot;01dd6733-f8cd-4e59-ad39-19e119d1a54f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an error if status is invalid&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes PUT /updateStatus/:tripId should return an error if status is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trip = await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .put(`/api/trips/updateStatus/${trip._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ status: &#x27;InvalidStatus&#x27; });\nexpect(res).to.have.status(400);\nexpect(res.body.message).to.equal(&#x27;Invalid status. Must be Upcoming, In Progress, or Completed&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3914cdf3-1bfa-4e70-b209-d01d0bd634a8&quot;,&quot;parentUUID&quot;:&quot;01dd6733-f8cd-4e59-ad39-19e119d1a54f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c9c8c01-edcf-4d2f-bd13-64b5a65fd865&quot;,&quot;3914cdf3-1bfa-4e70-b209-d01d0bd634a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;ebfc189a-d7a6-41f4-9b53-5c734ce46121&quot;,&quot;title&quot;:&quot;DELETE /delete/:tripId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a user&#x27;s trip&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes DELETE /delete/:tripId should delete a user&#x27;s trip&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trip = await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .delete(`/api/trips/delete/${trip._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;Trip deleted successfully&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d94adf60-3338-453f-89f2-998cc4278922&quot;,&quot;parentUUID&quot;:&quot;ebfc189a-d7a6-41f4-9b53-5c734ce46121&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return error if trip not found&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes DELETE /delete/:tripId should return error if trip not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(server)\n    .delete(&#x27;/api/trips/delete/60d7e14f7c411e6348f9f71d&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;Trip not found or not authorized&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;452d0ee4-6df0-4b71-85f3-9751134ca73a&quot;,&quot;parentUUID&quot;:&quot;ebfc189a-d7a6-41f4-9b53-5c734ce46121&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d94adf60-3338-453f-89f2-998cc4278922&quot;,&quot;452d0ee4-6df0-4b71-85f3-9751134ca73a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:117,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;c12f0d67-d655-4f22-ac5a-43b444d2793e&quot;,&quot;title&quot;:&quot;User API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;User API\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API \&quot;before all\&quot; hook in \&quot;User API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;179becf0-105c-4deb-a18f-b4a0cabb96d1&quot;,&quot;parentUUID&quot;:&quot;c12f0d67-d655-4f22-ac5a-43b444d2793e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;User API\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API \&quot;after each\&quot; hook in \&quot;User API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\ntoken = null;\nuserId = null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b682688-dc23-41a2-92ba-c6e8f280dd0b&quot;,&quot;parentUUID&quot;:&quot;c12f0d67-d655-4f22-ac5a-43b444d2793e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;34c39c32-fd38-4ff1-886c-2552beea424b&quot;,&quot;title&quot;:&quot;POST /register/auth&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new user and return token cookie&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/auth should register a new user and return token cookie&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:883,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/register/auth&#x27;)\n    .send({ email: &#x27;test@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;success&#x27;, true);\nexpect(res.body).to.have.property(&#x27;user&#x27;, &#x27;test@example.com&#x27;);\nexpect(res).to.have.cookie(&#x27;token&#x27;);\nconst user = await User.findOne({ email: &#x27;test@example.com&#x27; });\nexpect(user).to.exist;\nuserId = user._id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;866de64f-d0f5-453e-af2e-5f19b0833f74&quot;,&quot;parentUUID&quot;:&quot;34c39c32-fd38-4ff1-886c-2552beea424b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not register without email or password&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/auth should not register without email or password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/register/auth&#x27;)\n    .send({ email: &#x27;&#x27; });\nexpect(res).to.have.status(400);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.message).to.equal(&#x27;Email and password are required&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b13a6149-2f79-46b0-9059-202d6a950c5c&quot;,&quot;parentUUID&quot;:&quot;34c39c32-fd38-4ff1-886c-2552beea424b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not register duplicate email&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/auth should not register duplicate email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:810,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.create({ email: &#x27;dup@example.com&#x27;, password: &#x27;password123&#x27; });\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/register/auth&#x27;)\n    .send({ email: &#x27;dup@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(500);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.error).to.include(&#x27;Email already registered&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da46f301-4ea9-4590-b0be-d0c7338e1729&quot;,&quot;parentUUID&quot;:&quot;34c39c32-fd38-4ff1-886c-2552beea424b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;866de64f-d0f5-453e-af2e-5f19b0833f74&quot;,&quot;b13a6149-2f79-46b0-9059-202d6a950c5c&quot;,&quot;da46f301-4ea9-4590-b0be-d0c7338e1729&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1701,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;13109313-9901-46d8-be9d-2a2520438cc5&quot;,&quot;title&quot;:&quot;POST /login/auth&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /login/auth\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth \&quot;before each\&quot; hook in \&quot;POST /login/auth\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:472,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;login@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de2366fd-cb12-4e9b-90b2-1059ef6fbb91&quot;,&quot;parentUUID&quot;:&quot;13109313-9901-46d8-be9d-2a2520438cc5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login with correct credentials and set token cookie&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth should login with correct credentials and set token cookie&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:523,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/login/auth&#x27;)\n    .send({ email: &#x27;login@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;success&#x27;, true);\nexpect(res.body.message).to.equal(&#x27;Login successful&#x27;);\nexpect(res.body.user).to.have.property(&#x27;email&#x27;, &#x27;login@example.com&#x27;);\nexpect(res).to.have.cookie(&#x27;token&#x27;);\ntoken = res.header[&#x27;set-cookie&#x27;][0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f605547b-9224-4d3f-9f9e-3a5dcb36dcca&quot;,&quot;parentUUID&quot;:&quot;13109313-9901-46d8-be9d-2a2520438cc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail login with invalid credentials&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth should fail login with invalid credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:514,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/login/auth&#x27;)\n    .send({ email: &#x27;login@example.com&#x27;, password: &#x27;wrongpass&#x27; });\nexpect(res).to.have.status(401);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.message).to.equal(&#x27;Invalid credentials&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f5889c8-c92d-469b-a11d-c938c9c5ef26&quot;,&quot;parentUUID&quot;:&quot;13109313-9901-46d8-be9d-2a2520438cc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail login with non-existing user&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth should fail login with non-existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/login/auth&#x27;)\n    .send({ email: &#x27;nouser@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(401);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.message).to.equal(&#x27;Invalid credentials&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fa1b62c-9dd4-48e8-89ad-fc89e33f280f&quot;,&quot;parentUUID&quot;:&quot;13109313-9901-46d8-be9d-2a2520438cc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f605547b-9224-4d3f-9f9e-3a5dcb36dcca&quot;,&quot;5f5889c8-c92d-469b-a11d-c938c9c5ef26&quot;,&quot;7fa1b62c-9dd4-48e8-89ad-fc89e33f280f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1060,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;b334d7a4-14fc-4468-9a85-61b1fe45cd81&quot;,&quot;title&quot;:&quot;GET /me&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;GET /me\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API GET /me \&quot;before each\&quot; hook in \&quot;GET /me\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:455,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;me@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();\nuserId = user._id;\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d75015d3-d67d-463d-b2ae-5688095006a8&quot;,&quot;parentUUID&quot;:&quot;b334d7a4-14fc-4468-9a85-61b1fe45cd81&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get current user info with valid token&quot;,&quot;fullTitle&quot;:&quot;User API GET /me should get current user info with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .get(&#x27;/api/users/me&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;email&#x27;, &#x27;me@example.com&#x27;);\nexpect(res.body).to.not.have.property(&#x27;password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a0eca8d-5c97-4ac3-9019-0beb6ed477d3&quot;,&quot;parentUUID&quot;:&quot;b334d7a4-14fc-4468-9a85-61b1fe45cd81&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user does not exist&quot;,&quot;fullTitle&quot;:&quot;User API GET /me should return 404 if user does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeId = new mongoose.Types.ObjectId();\nconst fakeToken = jwt.sign({ id: fakeId, email: &#x27;fake@example.com&#x27; }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);\nconst res = await chai.request(app)\n    .get(&#x27;/api/users/me&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${fakeToken}`);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;User not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;278ad5dd-9032-4db9-9535-bf3cef580e5b&quot;,&quot;parentUUID&quot;:&quot;b334d7a4-14fc-4468-9a85-61b1fe45cd81&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 if no token provided&quot;,&quot;fullTitle&quot;:&quot;User API GET /me should return 401 if no token provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).get(&#x27;/api/users/me&#x27;);\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38f4f57d-8395-45e8-9f3f-dd9e54edb9f0&quot;,&quot;parentUUID&quot;:&quot;b334d7a4-14fc-4468-9a85-61b1fe45cd81&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a0eca8d-5c97-4ac3-9019-0beb6ed477d3&quot;,&quot;278ad5dd-9032-4db9-9535-bf3cef580e5b&quot;,&quot;38f4f57d-8395-45e8-9f3f-dd9e54edb9f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;ab1781a9-452d-4305-8bb0-34ac5addadea&quot;,&quot;title&quot;:&quot;POST /register/setup&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /register/setup\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/setup \&quot;before each\&quot; hook in \&quot;POST /register/setup\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:422,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;setup@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();\nuserId = user._id;\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90568d94-3807-4240-9d53-d41817f1c3e0&quot;,&quot;parentUUID&quot;:&quot;ab1781a9-452d-4305-8bb0-34ac5addadea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update user profile and mark profileCompleted&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/setup should update user profile and mark profileCompleted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const profileData = {\n    firstName: &#x27;John&#x27;,\n    lastName: &#x27;Doe&#x27;,\n    badge: &#x27;Intermediate&#x27;,\n    gender: &#x27;male&#x27;,\n    nickname: &#x27;JD&#x27;,\n    country: &#x27;USA&#x27;,\n    gear: [{ category: &#x27;Clothing&#x27;, item: &#x27;Jacket&#x27; }],\n    visibility: &#x27;private&#x27;\n};\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/register/setup&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send(profileData);\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nconsole.log(res.body.user)\nconst resUser = res.body.user;\nexpect(resUser.firstName).to.equal(profileData.firstName);\nexpect(resUser.lastName).to.equal(profileData.lastName);\nexpect(resUser.badge).to.equal(profileData.badge);\nexpect(resUser.gender).to.equal(profileData.gender);\nexpect(resUser.nickname).to.equal(profileData.nickname);\nexpect(resUser.country).to.equal(profileData.country);\nexpect(resUser.visibility).to.equal(profileData.visibility);\nexpect(res.body.user.gear.length).to.deep.equal(profileData.gear.length);\nexpect(res.body.user.profileCompleted).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d566515b-fbd4-4bd2-83bc-d1964ad83765&quot;,&quot;parentUUID&quot;:&quot;ab1781a9-452d-4305-8bb0-34ac5addadea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if user not found&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/setup should return 500 if user not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeToken = jwt.sign({ id: new mongoose.Types.ObjectId(), email: &#x27;fake@example.com&#x27; }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/register/setup&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${fakeToken}`)\n    .send({ firstName: &#x27;Jane&#x27; });\nexpect(res).to.have.status(500);\nexpect(res.body.success).to.be.false;\nexpect(res.body.message).to.equal(&#x27;User not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3118aff4-a2ee-4018-9d44-e321b82f31c0&quot;,&quot;parentUUID&quot;:&quot;ab1781a9-452d-4305-8bb0-34ac5addadea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d566515b-fbd4-4bd2-83bc-d1964ad83765&quot;,&quot;3118aff4-a2ee-4018-9d44-e321b82f31c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:72,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;cdc2f559-ac49-418c-925c-95dc37a5a843&quot;,&quot;title&quot;:&quot;POST /logout&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear token cookie and logout successfully&quot;,&quot;fullTitle&quot;:&quot;User API POST /logout should clear token cookie and logout successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).post(&#x27;/api/users/logout&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nexpect(res.body.message).to.equal(&#x27;Logged out successfully&#x27;);\nexpect(res.header[&#x27;set-cookie&#x27;][0]).to.include(&#x27;token=;&#x27;); // cleared cookie&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4924f34-6990-4b7c-86c5-6ae9069b12c5&quot;,&quot;parentUUID&quot;:&quot;cdc2f559-ac49-418c-925c-95dc37a5a843&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c4924f34-6990-4b7c-86c5-6ae9069b12c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;d3901f75-867e-44a6-aa41-5bfa156d2f27&quot;,&quot;title&quot;:&quot;POST /update/gear&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /update/gear\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear \&quot;before each\&quot; hook in \&quot;POST /update/gear\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:413,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;gear@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();\nuserId = user._id;\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9247789a-05f3-4fec-b7db-49fe628ff5e7&quot;,&quot;parentUUID&quot;:&quot;d3901f75-867e-44a6-aa41-5bfa156d2f27&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update user gear with valid token&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear should update user gear with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const gearData = [{ category: &#x27;Electronics&#x27;, item: &#x27;GPS&#x27; }, { category: &#x27;Clothing&#x27;, item: &#x27;Hat&#x27; }];\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/update/gear&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ gear: gearData });\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nexpect(res.body.message).to.equal(&#x27;Gear updated successfully&#x27;);\nconsole.log(res.body.user.gear)\nconst returnedGear = res.body.user.gear.map(({ category, item }) =&gt; ({ category, item }));\nexpect(returnedGear).to.deep.equal(gearData);\n// expect(res.body.user.gear).to.deep.equal(gearData);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26c7abd6-75f9-41fb-87eb-4a6781d40d8a&quot;,&quot;parentUUID&quot;:&quot;d3901f75-867e-44a6-aa41-5bfa156d2f27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user not found&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear should return 404 if user not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeToken = jwt.sign({ id: new mongoose.Types.ObjectId(), email: &#x27;fake@example.com&#x27; }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/update/gear&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${fakeToken}`)\n    .send({ gear: [] });\nexpect(res).to.have.status(404);\nexpect(res.body.success).to.be.false;\nexpect(res.body.message).to.equal(&#x27;User not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3929520f-91f2-4c14-96f4-1457c5058d34&quot;,&quot;parentUUID&quot;:&quot;d3901f75-867e-44a6-aa41-5bfa156d2f27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 if no token provided&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear should return 401 if no token provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/update/gear&#x27;)\n    .send({ gear: [] });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4e21df7-d2e1-4ce3-bfa3-8bcc3f37cc33&quot;,&quot;parentUUID&quot;:&quot;d3901f75-867e-44a6-aa41-5bfa156d2f27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26c7abd6-75f9-41fb-87eb-4a6781d40d8a&quot;,&quot;3929520f-91f2-4c14-96f4-1457c5058d34&quot;,&quot;a4e21df7-d2e1-4ce3-bfa3-8bcc3f37cc33&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:91,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:15000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.4.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>