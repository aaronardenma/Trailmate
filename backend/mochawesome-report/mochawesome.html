<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:36,&quot;tests&quot;:66,&quot;passes&quot;:66,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-07-07T05:08:28.201Z&quot;,&quot;end&quot;:&quot;2025-07-07T05:09:29.343Z&quot;,&quot;duration&quot;:61142,&quot;testsRegistered&quot;:66,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;a63fa46a-39db-4a79-8f89-964eb32c636e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Trails.deleteMany({});\nconst inserted = await Trails.insertMany(sampleTrails);\ntrailId = inserted[0]._id.toString();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;431ebaab-edfa-486d-950b-6b060e6c6dc1&quot;,&quot;parentUUID&quot;:&quot;a63fa46a-39db-4a79-8f89-964eb32c636e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Trails.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd787b77-fa8f-4fd9-9b58-c10c1ec5db2e&quot;,&quot;parentUUID&quot;:&quot;a63fa46a-39db-4a79-8f89-964eb32c636e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;abeafacf-d337-458c-866a-4f2439a0f235&quot;,&quot;title&quot;:&quot;Comment API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\comment.test.js&quot;,&quot;file&quot;:&quot;\\test\\comment.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes \&quot;before each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:531,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Post.deleteMany({});\nawait Comment.deleteMany({});\nuser = await User.create({\n    firstName: &#x27;Test&#x27;,\n    lastName: &#x27;User&#x27;,\n    email: &#x27;test@example.com&#x27;,\n    password: &#x27;password123&#x27;\n});\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;, { expiresIn: &#x27;1h&#x27; });\npost = await Post.create({\n    userId: user._id,\n    title: &#x27;Test Post&#x27;,\n    description: &#x27;Post description&#x27;,\n    photoUrl: &#x27;&#x27;,\n    likes: 0,\n    likedByUsers: []\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6184592d-9199-4945-9bc9-e75c1d10332d&quot;,&quot;parentUUID&quot;:&quot;abeafacf-d337-458c-866a-4f2439a0f235&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes \&quot;after each\&quot; hook in \&quot;Comment API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Post.deleteMany({});\nawait Comment.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db099e3c-b066-447e-95d8-002f6774a428&quot;,&quot;parentUUID&quot;:&quot;abeafacf-d337-458c-866a-4f2439a0f235&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;43118cc4-359e-4575-bb82-97d93d880107&quot;,&quot;title&quot;:&quot;POST /api/comments/add/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\comment.test.js&quot;,&quot;file&quot;:&quot;\\test\\comment.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should successfully add a comment to a post&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes POST /api/comments/add/:postId should successfully add a comment to a post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const commentText = &#x27;This is a test comment&#x27;;\nconst res = await chai\n    .request(app)\n    .post(`/api/comments/add/${post._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ comment: commentText });\nexpect(res).to.have.status(201);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Comment added successfully&#x27;);\nexpect(res.body.comment).to.include({\n    comment: commentText,\n    postID: post._id.toString(),\n    userID: user._id.toString(),\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8390c8e-1769-4c89-babf-d15bfe652274&quot;,&quot;parentUUID&quot;:&quot;43118cc4-359e-4575-bb82-97d93d880107&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail without a valid token&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes POST /api/comments/add/:postId should fail without a valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .post(`/api/comments/add/${post._id}`)\n    .send({ comment: &#x27;No token comment&#x27; });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e26171c-7e56-4ad5-bae4-1fb922f7a859&quot;,&quot;parentUUID&quot;:&quot;43118cc4-359e-4575-bb82-97d93d880107&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for empty comment&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes POST /api/comments/add/:postId should return 400 for empty comment&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .post(`/api/comments/add/${post._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ comment: &#x27;&#x27; });\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7e686d8-f87d-4f67-81b5-d11d93e10bcb&quot;,&quot;parentUUID&quot;:&quot;43118cc4-359e-4575-bb82-97d93d880107&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8390c8e-1769-4c89-babf-d15bfe652274&quot;,&quot;8e26171c-7e56-4ad5-bae4-1fb922f7a859&quot;,&quot;d7e686d8-f87d-4f67-81b5-d11d93e10bcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:144,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;6a13e8fa-8127-4714-b676-7e7617421925&quot;,&quot;title&quot;:&quot;GET /api/comments/post/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\comment.test.js&quot;,&quot;file&quot;:&quot;\\test\\comment.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve comments for a post&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes GET /api/comments/post/:postId should retrieve comments for a post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Comment.create({\n    userID: user._id,\n    postID: post._id,\n    comment: &#x27;Nice post!&#x27;\n});\nconst res = await chai\n    .request(app)\n    .get(`/api/comments/post/${post._id}`);\nexpect(res).to.have.status(200);\nexpect(res.body.comments).to.be.an(&#x27;array&#x27;);\nexpect(res.body.comments[0]).to.have.property(&#x27;comment&#x27;, &#x27;Nice post!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24e3ede6-ea21-4d19-b49a-437d867e03d8&quot;,&quot;parentUUID&quot;:&quot;6a13e8fa-8127-4714-b676-7e7617421925&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 for invalid post ID format&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes GET /api/comments/post/:postId should return 400 for invalid post ID format&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(`/api/comments/post/invalid123`);\nexpect(res).to.have.status(400);\nexpect(res.body).to.have.property(&#x27;error&#x27;, &#x27;Invalid post ID format&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f67c1e03-4a34-4a5b-9f0a-77160b171aaa&quot;,&quot;parentUUID&quot;:&quot;6a13e8fa-8127-4714-b676-7e7617421925&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return empty array if no comments exist&quot;,&quot;fullTitle&quot;:&quot;Comment API Routes GET /api/comments/post/:postId should return empty array if no comments exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(`/api/comments/post/${post._id}`);\nexpect(res).to.have.status(200);\nexpect(res.body.comments).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84165b6c-c446-43a3-8928-85d5aa95a888&quot;,&quot;parentUUID&quot;:&quot;6a13e8fa-8127-4714-b676-7e7617421925&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24e3ede6-ea21-4d19-b49a-437d867e03d8&quot;,&quot;f67c1e03-4a34-4a5b-9f0a-77160b171aaa&quot;,&quot;84165b6c-c446-43a3-8928-85d5aa95a888&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:165,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;f2537ba3-69e0-4deb-9397-ad200133d428&quot;,&quot;title&quot;:&quot;Favorite API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes \&quot;before each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:762,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.deleteMany({});\nawait User.deleteMany({});\nuser = await User.create({\n    firstName: &#x27;Test&#x27;,\n    lastName: &#x27;User&#x27;,\n    email: &#x27;favorite@example.com&#x27;,\n    password: &#x27;password123&#x27;\n});\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;, { expiresIn: &#x27;1h&#x27; });\ntrail = await Trail.create( {\n    name: \&quot;Oceanview Path\&quot;,\n    latitude: 49.2700,\n    longitude: -123.1250,\n    photoUrl: \&quot;https://example.com/trails/oceanview.jpg\&quot;,\n    location: \&quot;Burnaby\&quot;,\n    description: \&quot;Moderate trail with breathtaking views of the ocean.\&quot;,\n    avgElevationM: 280,\n    difficulty: \&quot;Moderate\&quot;,\n    distanceKm: 6.1,\n    tags: []\n})\ntrailID = trail._id&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7e84c48-fd73-4075-b9bc-fc7b39d98f23&quot;,&quot;parentUUID&quot;:&quot;f2537ba3-69e0-4deb-9397-ad200133d428&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes \&quot;after each\&quot; hook in \&quot;Favorite API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:111,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.deleteMany({});\nawait User.deleteMany({});\nawait Trail.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1d86ce1-36ad-4888-879d-8c2e15c0feee&quot;,&quot;parentUUID&quot;:&quot;f2537ba3-69e0-4deb-9397-ad200133d428&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8ab1517a-f923-4de5-b80b-26a7218b9764&quot;,&quot;title&quot;:&quot;POST /api/favorites/addFavorite&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a trail to favorites&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/addFavorite should add a trail to favorites&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/addFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(201);\nconsole.log(res.body.message)\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Favorite added successfully&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e75533b7-b684-48b4-b6a3-8d88b2f65151&quot;,&quot;parentUUID&quot;:&quot;8ab1517a-f923-4de5-b80b-26a7218b9764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if trailID is missing&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/addFavorite should return 400 if trailID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/addFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({});\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3992158a-4be7-4b15-90e3-2c5ba7801635&quot;,&quot;parentUUID&quot;:&quot;8ab1517a-f923-4de5-b80b-26a7218b9764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 409 if trail already exists in favorites&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/addFavorite should return 409 if trail already exists in favorites&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .post(&#x27;/api/favorite/addFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f12bff8-33ec-45ed-a783-f5ecb4b6ddcb&quot;,&quot;parentUUID&quot;:&quot;8ab1517a-f923-4de5-b80b-26a7218b9764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e75533b7-b684-48b4-b6a3-8d88b2f65151&quot;,&quot;3992158a-4be7-4b15-90e3-2c5ba7801635&quot;,&quot;4f12bff8-33ec-45ed-a783-f5ecb4b6ddcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:185,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;b3b5b3ee-7e81-4946-a50f-c06c91d723fe&quot;,&quot;title&quot;:&quot;GET /api/favorites/getFavoriteTrails&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return favorite trails for the user&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes GET /api/favorites/getFavoriteTrails should return favorite trails for the user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .get(&#x27;/api/favorite/getFavoriteTrails&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nexpect(res.body[0].trailID.toString()).to.equal(trailID.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;313ed3c6-5dcb-4086-b879-32557f658be6&quot;,&quot;parentUUID&quot;:&quot;b3b5b3ee-7e81-4946-a50f-c06c91d723fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;313ed3c6-5dcb-4086-b879-32557f658be6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:75,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;bda5aaa3-b8b0-4dbc-b122-ea08d0aaacff&quot;,&quot;title&quot;:&quot;POST /api/favorites/isFavorite&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true if trail is favorited&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/isFavorite should return true if trail is favorited&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .post(&#x27;/api/favorite/isFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;isFavorite&#x27;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60c0280a-abf5-428e-b3c3-0ca7370302bf&quot;,&quot;parentUUID&quot;:&quot;bda5aaa3-b8b0-4dbc-b122-ea08d0aaacff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false if trail is not favorited&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/isFavorite should return false if trail is not favorited&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/isFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID: trailID });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;isFavorite&#x27;, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4f5d34f-a6c3-44ad-bd07-c8f1021cea71&quot;,&quot;parentUUID&quot;:&quot;bda5aaa3-b8b0-4dbc-b122-ea08d0aaacff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if trailID is missing&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes POST /api/favorites/isFavorite should return 400 if trailID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/favorite/isFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({});\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;480ebc92-5a5e-41fe-bd45-e0a9fa57fcb5&quot;,&quot;parentUUID&quot;:&quot;bda5aaa3-b8b0-4dbc-b122-ea08d0aaacff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60c0280a-abf5-428e-b3c3-0ca7370302bf&quot;,&quot;b4f5d34f-a6c3-44ad-bd07-c8f1021cea71&quot;,&quot;480ebc92-5a5e-41fe-bd45-e0a9fa57fcb5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:159,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;0d3e119f-8599-4163-8830-6ca94d9def18&quot;,&quot;title&quot;:&quot;DELETE /api/favorites/deleteFavorite&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\favorite.test.js&quot;,&quot;file&quot;:&quot;\\test\\favorite.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a favorite trail&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes DELETE /api/favorites/deleteFavorite should remove a favorite trail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Favorite.create({ userId: user._id, trailID });\nconst res = await chai.request(app)\n    .delete(&#x27;/api/favorite/deleteFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Favorite removed successfully&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;769305bb-4e0c-4c4f-bed4-71a8fe73dd70&quot;,&quot;parentUUID&quot;:&quot;0d3e119f-8599-4163-8830-6ca94d9def18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if trail is not found&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes DELETE /api/favorites/deleteFavorite should return 404 if trail is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .delete(&#x27;/api/favorite/deleteFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ trailID });\nexpect(res).to.have.status(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d684af9-21fe-426e-845b-60944b11e549&quot;,&quot;parentUUID&quot;:&quot;0d3e119f-8599-4163-8830-6ca94d9def18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if trailID is missing&quot;,&quot;fullTitle&quot;:&quot;Favorite API Routes DELETE /api/favorites/deleteFavorite should return 400 if trailID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .delete(&#x27;/api/favorite/deleteFavorite&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({});\nexpect(res).to.have.status(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0766e70c-b467-49a4-ad68-b3cbdd46ca1d&quot;,&quot;parentUUID&quot;:&quot;0d3e119f-8599-4163-8830-6ca94d9def18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;769305bb-4e0c-4c4f-bed4-71a8fe73dd70&quot;,&quot;1d684af9-21fe-426e-845b-60944b11e549&quot;,&quot;0766e70c-b467-49a4-ad68-b3cbdd46ca1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;a2e4e601-1089-479d-a7c0-77f9efa3cb97&quot;,&quot;title&quot;:&quot;Gear API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\gear.test.js&quot;,&quot;file&quot;:&quot;\\test\\gear.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes \&quot;before each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Gear.deleteMany({});\nawait Gear.insertMany(sampleGear);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eedca98c-e436-47c0-a4f2-ab1e162eb769&quot;,&quot;parentUUID&quot;:&quot;a2e4e601-1089-479d-a7c0-77f9efa3cb97&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes \&quot;after each\&quot; hook in \&quot;Gear API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Gear.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d42a68e-046f-47e3-b467-bd4d0bfd51ac&quot;,&quot;parentUUID&quot;:&quot;a2e4e601-1089-479d-a7c0-77f9efa3cb97&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all gear items&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes should return all gear items&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(app)\n    .get(&#x27;/api/gear&#x27;)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;array&#x27;);\n        expect(res.body.length).to.equal(2);\n        console.log(res.body[0])\n        expect(res.body[0]).to.have.property(&#x27;category&#x27;);\n        expect(res.body[0]).to.have.property(&#x27;items&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56779fd4-8167-4972-b6f4-46af61a7b385&quot;,&quot;parentUUID&quot;:&quot;a2e4e601-1089-479d-a7c0-77f9efa3cb97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array if no gear exists&quot;,&quot;fullTitle&quot;:&quot;Gear API Routes should return an empty array if no gear exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Gear.deleteMany({});\nconst res = await chai.request(app).get(&#x27;/api/gear&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d9d44c5-1de8-43ad-8bcd-6004afcd224f&quot;,&quot;parentUUID&quot;:&quot;a2e4e601-1089-479d-a7c0-77f9efa3cb97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56779fd4-8167-4972-b6f4-46af61a7b385&quot;,&quot;7d9d44c5-1de8-43ad-8bcd-6004afcd224f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:110,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;9c1d1a60-a425-4745-b569-8712fa875703&quot;,&quot;title&quot;:&quot;Post API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Post API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Post API \&quot;before each\&quot; hook in \&quot;Post API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:717,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Post.deleteMany({});\nconst user = new User({\n    email: &#x27;test@example.com&#x27;,\n    password: &#x27;password123&#x27;,\n    firstName: &#x27;Test&#x27;,\n    lastName: &#x27;User&#x27;,\n    gender: &#x27;male&#x27;,\n    visibility: &#x27;public&#x27;\n});\nawait user.save();\nuserId = user._id.toString();\ntoken = jwt.sign({ id: userId, email: user.email }, process.env.JWT_SECRET, {\n    expiresIn: &#x27;1h&#x27;\n});\nconst post = await Post.create({\n    userId,\n    title: &#x27;Initial Post&#x27;,\n    description: &#x27;Initial Description&#x27;,\n    dateOfPost: new Date(),\n    likedByUsers: [],\n    comments: [],\n    likes: 0,\n    photoUrl: &#x27;&#x27;\n});\npostId = post._id.toString();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24713323-c876-4f53-8af3-06ee59b186ca&quot;,&quot;parentUUID&quot;:&quot;9c1d1a60-a425-4745-b569-8712fa875703&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;04f73b29-2447-4416-b08f-0c8c287a9b2b&quot;,&quot;title&quot;:&quot;GET /getPosts&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all posts with user info and respect user visibility&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPosts should return all posts with user info and respect user visibility&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.findByIdAndUpdate(userId, {\n    visibility: &#x27;private&#x27;,\n    firstName: &#x27;John&#x27;,\n    lastName: &#x27;Doe&#x27;,\n    gender: &#x27;male&#x27;\n});\nconst res = await chai.request(app).get(&#x27;/getPosts&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nconst post = res.body[0];\nexpect(post).to.have.property(&#x27;userId&#x27;);\nexpect(post.userId).to.include.keys(&#x27;_id&#x27;, &#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;gender&#x27;);\nexpect(post.userId).to.not.have.property(&#x27;email&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb9765e1-3005-4af7-8817-5bb37bb719b2&quot;,&quot;parentUUID&quot;:&quot;04f73b29-2447-4416-b08f-0c8c287a9b2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should include full user info if visibility is public&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPosts should include full user info if visibility is public&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.findByIdAndUpdate(userId, { visibility: &#x27;public&#x27; });\nconst res = await chai.request(app).get(&#x27;/getPosts&#x27;);\nexpect(res).to.have.status(200);\nconst post = res.body[0];\nexpect(post.userId).to.have.property(&#x27;email&#x27;, &#x27;test@example.com&#x27;);\nexpect(post.userId).to.have.property(&#x27;firstName&#x27;, &#x27;Test&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d080e89f-63a7-4b31-b825-1cbe5a4a9599&quot;,&quot;parentUUID&quot;:&quot;04f73b29-2447-4416-b08f-0c8c287a9b2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb9765e1-3005-4af7-8817-5bb37bb719b2&quot;,&quot;d080e89f-63a7-4b31-b825-1cbe5a4a9599&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:188,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;ab4f2cce-3f39-41fb-9dfb-07f53d2dab19&quot;,&quot;title&quot;:&quot;GET /getPostsForUser/&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return posts belonging to the authenticated user&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPostsForUser/ should return posts belonging to the authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(&#x27;/getPostsForUser/&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nexpect(res.body.some(p =&gt; p._id === postId)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2599c683-4694-4c3a-89ae-1b1725f947a7&quot;,&quot;parentUUID&quot;:&quot;ab4f2cce-3f39-41fb-9dfb-07f53d2dab19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 if no token provided&quot;,&quot;fullTitle&quot;:&quot;Post API GET /getPostsForUser/ should return 401 if no token provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).get(&#x27;/getPostsForUser/&#x27;);\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0625e31f-cb20-4dd2-80dd-7c479533298b&quot;,&quot;parentUUID&quot;:&quot;ab4f2cce-3f39-41fb-9dfb-07f53d2dab19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2599c683-4694-4c3a-89ae-1b1725f947a7&quot;,&quot;0625e31f-cb20-4dd2-80dd-7c479533298b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:76,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;dfe5080a-3455-40d1-9541-35df8f23dbcb&quot;,&quot;title&quot;:&quot;POST /add&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a post for authenticated user&quot;,&quot;fullTitle&quot;:&quot;Post API POST /add should create a post for authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const postPayload = {\n    title: &#x27;New post&#x27;,\n    description: &#x27;Post description&#x27;,\n    photoUrl: &#x27;http://example.com/image.png&#x27;\n};\nconst res = await chai\n    .request(app)\n    .post(&#x27;/add&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send(postPayload);\nexpect(res).to.have.status(201);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Post created successfully&#x27;);\nexpect(res.body.post).to.include(postPayload);\nexpect(res.body.post).to.have.property(&#x27;userId&#x27;, userId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9805f12c-6170-4740-ae93-f14ba252eb1d&quot;,&quot;parentUUID&quot;:&quot;dfe5080a-3455-40d1-9541-35df8f23dbcb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 without token&quot;,&quot;fullTitle&quot;:&quot;Post API POST /add should return 401 without token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).post(&#x27;/add&#x27;).send({ title: &#x27;x&#x27; });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c6a9d8c-8ff5-4a62-a5be-999a7f4b4f78&quot;,&quot;parentUUID&quot;:&quot;dfe5080a-3455-40d1-9541-35df8f23dbcb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9805f12c-6170-4740-ae93-f14ba252eb1d&quot;,&quot;6c6a9d8c-8ff5-4a62-a5be-999a7f4b4f78&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:85,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;2d4eb281-391a-45fc-ab17-27b6f0476f59&quot;,&quot;title&quot;:&quot;PUT /updatePost/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update an existing post&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePost/:postId should update an existing post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatePayload = {\n    title: &#x27;Updated title&#x27;,\n    description: &#x27;Updated desc&#x27;,\n    photoUrl: &#x27;http://example.com/updated.png&#x27;,\n    likes: 5,\n    comments: [&#x27;Nice!&#x27;]\n};\nconst res = await chai\n    .request(app)\n    .put(`/updatePost/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send(updatePayload);\nexpect(res).to.have.status(201);\nexpect(res.body).to.have.property(&#x27;message&#x27;, &#x27;Post created successfully&#x27;);\nexpect(res.body.post.title).to.equal(updatePayload.title);\nexpect(res.body.post.description).to.equal(updatePayload.description);\nexpect(res.body.post.photoUrl).to.equal(updatePayload.photoUrl);\nexpect(res.body.post.likes).to.equal(updatePayload.likes);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d58d2fe8-4953-4b74-abd9-9a1a944a208e&quot;,&quot;parentUUID&quot;:&quot;2d4eb281-391a-45fc-ab17-27b6f0476f59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 without token&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePost/:postId should return 401 without token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).put(`/updatePost/${postId}`).send({ title: &#x27;x&#x27; });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1fe71cb-cefd-4f61-a163-dc1febdfbe55&quot;,&quot;parentUUID&quot;:&quot;2d4eb281-391a-45fc-ab17-27b6f0476f59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d58d2fe8-4953-4b74-abd9-9a1a944a208e&quot;,&quot;b1fe71cb-cefd-4f61-a163-dc1febdfbe55&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:86,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;0f3553c0-90b5-4532-a949-a9d3644a9330&quot;,&quot;title&quot;:&quot;PUT /updatePostLikes/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should like a post if not already liked&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostLikes/:postId should like a post if not already liked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .put(`/updatePostLikes/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;You liked this post!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ecc1637-5963-4073-a4ae-daf3f221a9a2&quot;,&quot;parentUUID&quot;:&quot;0f3553c0-90b5-4532-a949-a9d3644a9330&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should unlike the post if already liked&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostLikes/:postId should unlike the post if already liked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await chai\n    .request(app)\n    .put(`/updatePostLikes/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nconst res = await chai\n    .request(app)\n    .put(`/updatePostLikes/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;You unliked this post.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eee35fbf-5d6e-48e7-940a-2207fa9e05c1&quot;,&quot;parentUUID&quot;:&quot;0f3553c0-90b5-4532-a949-a9d3644a9330&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if post does not exist&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostLikes/:postId should return 404 if post does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .put(&#x27;/updatePostLikes/507f1f77bcf86cd799439011&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;Post not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;815abe90-f92a-4c30-b64e-1c28516057b8&quot;,&quot;parentUUID&quot;:&quot;0f3553c0-90b5-4532-a949-a9d3644a9330&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ecc1637-5963-4073-a4ae-daf3f221a9a2&quot;,&quot;eee35fbf-5d6e-48e7-940a-2207fa9e05c1&quot;,&quot;815abe90-f92a-4c30-b64e-1c28516057b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:391,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;c06aeec7-9313-4bf4-bbac-48af71bb8496&quot;,&quot;title&quot;:&quot;PUT /updatePostComments/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 500 if error occurs&quot;,&quot;fullTitle&quot;:&quot;Post API PUT /updatePostComments/:postId should return 500 if error occurs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .put(&#x27;/updatePostComments/invalidid&#x27;)\n    .send({ comments: { currentUserComments: &#x27;test&#x27; } });\nexpect(res).to.have.status(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bf99f7d-61ff-4ed8-bc87-3bd230b7d003&quot;,&quot;parentUUID&quot;:&quot;c06aeec7-9313-4bf4-bbac-48af71bb8496&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4bf99f7d-61ff-4ed8-bc87-3bd230b7d003&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;54e4996e-43d8-4ddf-b1dc-6c7fb6c222db&quot;,&quot;title&quot;:&quot;DELETE /deletePost/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete the post&quot;,&quot;fullTitle&quot;:&quot;Post API DELETE /deletePost/:id should delete the post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newPost = await Post.create({\n    userId,\n    title: &#x27;To be deleted&#x27;,\n    description: &#x27;Delete me&#x27;,\n    dateOfPost: new Date(),\n    likedByUsers: [],\n    photoUrl: &#x27;&#x27;\n});\nconst res = await chai.request(app).delete(`/deletePost/${newPost._id}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;Post deleted successfully&#x27;);\nexpect(res.body.user._id).to.equal(newPost._id.toString());\nconst deleted = await Post.findById(newPost._id);\nexpect(deleted).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f363d154-46c9-4fde-a13a-0d893389abe0&quot;,&quot;parentUUID&quot;:&quot;54e4996e-43d8-4ddf-b1dc-6c7fb6c222db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if post not found&quot;,&quot;fullTitle&quot;:&quot;Post API DELETE /deletePost/:id should return 404 if post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).delete(&#x27;/deletePost/507f1f77bcf86cd799439011&#x27;);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;Post not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;665e4e19-0d3c-4de0-9c0b-013b574bed3d&quot;,&quot;parentUUID&quot;:&quot;54e4996e-43d8-4ddf-b1dc-6c7fb6c222db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f363d154-46c9-4fde-a13a-0d893389abe0&quot;,&quot;665e4e19-0d3c-4de0-9c0b-013b574bed3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:152,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;1d1c2710-8a6b-4703-a744-1da3632bd8cf&quot;,&quot;title&quot;:&quot;GET /postLikeStatus/:postId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\post.test.js&quot;,&quot;file&quot;:&quot;\\test\\post.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return liked: true if user liked the post&quot;,&quot;fullTitle&quot;:&quot;Post API GET /postLikeStatus/:postId should return liked: true if user liked the post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const post = await Post.findById(postId);\npost.likedByUsers = [userId];\nawait post.save();\nconst res = await chai\n    .request(app)\n    .get(`/postLikeStatus/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.liked).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b42d95b-24f7-4b2d-9d25-961c5148ff83&quot;,&quot;parentUUID&quot;:&quot;1d1c2710-8a6b-4703-a744-1da3632bd8cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return liked: false if user did not like the post&quot;,&quot;fullTitle&quot;:&quot;Post API GET /postLikeStatus/:postId should return liked: false if user did not like the post&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const post = await Post.findById(postId);\npost.likedByUsers = [];\nawait post.save();\nconst res = await chai\n    .request(app)\n    .get(`/postLikeStatus/${postId}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.liked).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d2d0054-1d6d-4f90-ab17-dfb48e272a46&quot;,&quot;parentUUID&quot;:&quot;1d1c2710-8a6b-4703-a744-1da3632bd8cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if post not found&quot;,&quot;fullTitle&quot;:&quot;Post API GET /postLikeStatus/:postId should return 404 if post not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai\n    .request(app)\n    .get(&#x27;/postLikeStatus/507f1f77bcf86cd799439011&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b90902ce-bb42-4b7b-bb80-5f26fa800396&quot;,&quot;parentUUID&quot;:&quot;1d1c2710-8a6b-4703-a744-1da3632bd8cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b42d95b-24f7-4b2d-9d25-961c5148ff83&quot;,&quot;5d2d0054-1d6d-4f90-ab17-dfb48e272a46&quot;,&quot;b90902ce-bb42-4b7b-bb80-5f26fa800396&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:275,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;c5f9f078-e01f-4f9e-9c76-09bc1fe36cb9&quot;,&quot;title&quot;:&quot;Tag API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\tags.test.js&quot;,&quot;file&quot;:&quot;\\test\\tags.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Tag API \&quot;before each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Tag.deleteMany({});\nawait Tag.insertMany(sampleTags);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5f85410-e810-46b9-86cd-2fe3bfefbc52&quot;,&quot;parentUUID&quot;:&quot;c5f9f078-e01f-4f9e-9c76-09bc1fe36cb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Tag API \&quot;after each\&quot; hook in \&quot;Tag API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Tag.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6037503-94c5-4e77-9557-db0899c8858c&quot;,&quot;parentUUID&quot;:&quot;c5f9f078-e01f-4f9e-9c76-09bc1fe36cb9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;650b6302-eaee-470e-84ad-ac3988570c0f&quot;,&quot;title&quot;:&quot;GET /api/tags&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\tags.test.js&quot;,&quot;file&quot;:&quot;\\test\\tags.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all tags&quot;,&quot;fullTitle&quot;:&quot;Tag API GET /api/tags should return all tags&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).get(&#x27;/api/tags&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);\nexpect(res.body.length).to.equal(2);\nexpect(res.body[0]).to.have.property(&#x27;name&#x27;);\nexpect(res.body[0]).to.have.property(&#x27;name&#x27;, &#x27;Scenic&#x27;);\nexpect(res.body[1]).to.have.property(&#x27;name&#x27;, &#x27;Challenging&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;513d6e7d-9859-4872-8b24-c93135cd4567&quot;,&quot;parentUUID&quot;:&quot;650b6302-eaee-470e-84ad-ac3988570c0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array when no tags exist&quot;,&quot;fullTitle&quot;:&quot;Tag API GET /api/tags should return an empty array when no tags exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Tag.deleteMany({});\nconst res = await chai.request(app).get(&#x27;/api/tags&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;).that.is.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5c80902-9b78-449b-9435-c2e5329a1863&quot;,&quot;parentUUID&quot;:&quot;650b6302-eaee-470e-84ad-ac3988570c0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;513d6e7d-9859-4872-8b24-c93135cd4567&quot;,&quot;f5c80902-9b78-449b-9435-c2e5329a1863&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:110,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;70a2971a-ffd8-4b45-b81f-91bf3a051cfd&quot;,&quot;title&quot;:&quot;Trail API Test Collection&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trails.test.js&quot;,&quot;file&quot;:&quot;\\test\\trails.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all 5 trails&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection should get all 5 trails&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .get(&#x27;/api/trails/getTrails&#x27;)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;array&#x27;).with.lengthOf(4);\n        expect(res.body[0]).to.include.keys(\n            &#x27;_id&#x27;, &#x27;name&#x27;, &#x27;latitude&#x27;, &#x27;longitude&#x27;, &#x27;photoUrl&#x27;, &#x27;location&#x27;,\n            &#x27;description&#x27;, &#x27;avgElevationM&#x27;, &#x27;difficulty&#x27;, &#x27;distanceKm&#x27;, &#x27;tags&#x27;\n        );\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96b2764f-6c30-4b16-8429-cb096eec32cd&quot;,&quot;parentUUID&quot;:&quot;70a2971a-ffd8-4b45-b81f-91bf3a051cfd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c88ad018-1814-420a-a9e0-2f4a2e17527f&quot;,&quot;title&quot;:&quot;POST /addTrail&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trails.test.js&quot;,&quot;file&quot;:&quot;\\test\\trails.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new trail&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection POST /addTrail should create a new trail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trails/addTrail&#x27;)\n    .send({\n        name: \&quot;New Trail\&quot;,\n        distanceKm: 4.2,\n        avgElevationM: 200,\n        timeMinutes: 60,\n        location: \&quot;Somewhere\&quot;,\n        photoUrl: \&quot;http://example.com/new.jpg\&quot;,\n        description: \&quot;Just testing.\&quot;,\n        latitude: 49.0,\n        longitude: -123.0,\n        tags: []\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(201);\n        expect(res.body.message).to.equal(\&quot;Trail added successfully\&quot;);\n        expect(res.body.trail).to.include({ name: \&quot;New Trail\&quot; });\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cfdbdca-5e9e-4e9c-a122-3bf3197a608c&quot;,&quot;parentUUID&quot;:&quot;c88ad018-1814-420a-a9e0-2f4a2e17527f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cfdbdca-5e9e-4e9c-a122-3bf3197a608c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;def6ec3e-3b33-421d-9185-3af35a3473ab&quot;,&quot;title&quot;:&quot;GET /getTrailById/:id&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trails.test.js&quot;,&quot;file&quot;:&quot;\\test\\trails.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should fetch a trail by valid ID&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection GET /getTrailById/:id should fetch a trail by valid ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .get(`/api/trails/getTrailById/${trailId}`)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;_id&#x27;, trailId);\n        expect(res.body.name).to.equal(\&quot;Sunset Ridge Trail\&quot;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a02a6f20-72e1-4dfe-babe-696261583488&quot;,&quot;parentUUID&quot;:&quot;def6ec3e-3b33-421d-9185-3af35a3473ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 for non-existing ID&quot;,&quot;fullTitle&quot;:&quot;Trail API Test Collection GET /getTrailById/:id should return 404 for non-existing ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeId = new mongoose.Types.ObjectId();\nchai.request(server)\n    .get(`/api/trails/getTrailById/${fakeId}`)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(404);\n        expect(res.body.message).to.equal(&#x27;Trail not found&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93696f10-25a9-4815-9040-36f9cd2e09d6&quot;,&quot;parentUUID&quot;:&quot;def6ec3e-3b33-421d-9185-3af35a3473ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a02a6f20-72e1-4dfe-babe-696261583488&quot;,&quot;93696f10-25a9-4815-9040-36f9cd2e09d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:78,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[&quot;96b2764f-6c30-4b16-8429-cb096eec32cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:47,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;7cd59407-a29c-42ab-a6ad-a3f88f2f2490&quot;,&quot;title&quot;:&quot;Trip API Routes&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes \&quot;before each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:784,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Trail.deleteMany({});\nawait Trip.deleteMany({});\nuser = await User.create({ username: &#x27;testuser&#x27;, email: &#x27;test@example.com&#x27;, password: &#x27;testpassword123&#x27; });\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;, { expiresIn: &#x27;1h&#x27; });\ntrail = await Trail.create(sampleTrail);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cb8e6e5-ef31-45f6-93d6-530ff70823cf&quot;,&quot;parentUUID&quot;:&quot;7cd59407-a29c-42ab-a6ad-a3f88f2f2490&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes \&quot;after each\&quot; hook in \&quot;Trip API Routes\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\nawait Trail.deleteMany({});\nawait Trip.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abf7255b-ff42-4f31-99bb-7ee083c872ba&quot;,&quot;parentUUID&quot;:&quot;7cd59407-a29c-42ab-a6ad-a3f88f2f2490&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c44ec12a-edde-476f-b43c-fce09b4172ff&quot;,&quot;title&quot;:&quot;POST /save&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should save a new trip with status \&quot;Upcoming\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /save should save a new trip with status \&quot;Upcoming\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/save&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        endDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(201);\n        expect(res.body.message).to.equal(&#x27;Trip saved successfully!&#x27;);\n        expect(res.body.trip.status).to.equal(&#x27;Upcoming&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7623228-8bd1-4229-b74a-f5136d5d7f6e&quot;,&quot;parentUUID&quot;:&quot;c44ec12a-edde-476f-b43c-fce09b4172ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return error when required fields are missing&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /save should return error when required fields are missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/save&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(400);\n        expect(res.body.success).to.equal(false);\n        expect(res.body.message).to.equal(&#x27;Trail ID, start date, end date, and time are required&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1dc88f5c-ae06-4434-930c-59ea48f717c6&quot;,&quot;parentUUID&quot;:&quot;c44ec12a-edde-476f-b43c-fce09b4172ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7623228-8bd1-4229-b74a-f5136d5d7f6e&quot;,&quot;1dc88f5c-ae06-4434-930c-59ea48f717c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;e386c260-6770-4d29-9931-c8e084497a84&quot;,&quot;title&quot;:&quot;POST /start&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should start a new trip with status \&quot;In Progress\&quot;&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /start should start a new trip with status \&quot;In Progress\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/start&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        endDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(201);\n        expect(res.body.message).to.equal(&#x27;Trip started successfully!&#x27;);\n        expect(res.body.trip.status).to.equal(&#x27;In Progress&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec4fc270-7bd2-403f-9533-5c44dc895c5a&quot;,&quot;parentUUID&quot;:&quot;e386c260-6770-4d29-9931-c8e084497a84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return error if the trip has no required fields&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes POST /start should return error if the trip has no required fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .post(&#x27;/api/trips/start&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({\n        trailID: trail._id,\n        startDate: new Date(),\n        time: 100\n    })\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(400);\n        expect(res.body.success).to.equal(false);\n        expect(res.body.message).to.equal(&#x27;Trail ID, start date, end date, and time are required&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f405a815-04d2-48e0-9c55-717456436dd1&quot;,&quot;parentUUID&quot;:&quot;e386c260-6770-4d29-9931-c8e084497a84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec4fc270-7bd2-403f-9533-5c44dc895c5a&quot;,&quot;f405a815-04d2-48e0-9c55-717456436dd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:167,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;047e723c-bb1d-48dd-ab78-bf19a03a1f0f&quot;,&quot;title&quot;:&quot;GET /&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve all user trips&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes GET / should retrieve all user trips&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:130,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .get(&#x27;/api/trips/&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nexpect(res.body.trips).to.be.an(&#x27;array&#x27;).with.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;529d407c-898c-4f87-9bf4-b08dbac7999b&quot;,&quot;parentUUID&quot;:&quot;047e723c-bb1d-48dd-ab78-bf19a03a1f0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array if the user has no trips&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes GET / should return an empty array if the user has no trips&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai.request(server)\n    .get(&#x27;/api/trips/&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body.success).to.be.true;\n        expect(res.body.trips).to.be.an(&#x27;array&#x27;).that.is.empty;\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5903c43e-67eb-4789-89f5-192d36b2802a&quot;,&quot;parentUUID&quot;:&quot;047e723c-bb1d-48dd-ab78-bf19a03a1f0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;529d407c-898c-4f87-9bf4-b08dbac7999b&quot;,&quot;5903c43e-67eb-4789-89f5-192d36b2802a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:187,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;7e252e60-761f-4da1-9d0f-8b122c741f44&quot;,&quot;title&quot;:&quot;PUT /updateStatus/:tripId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update the trip status&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes PUT /updateStatus/:tripId should update the trip status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trip = await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .put(`/api/trips/updateStatus/${trip._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ status: &#x27;Completed&#x27; });\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;Trip status updated successfully&#x27;);\nexpect(res.body.trip.status).to.equal(&#x27;Completed&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;180b4681-eca6-4dd5-9d7e-874cb2f3261c&quot;,&quot;parentUUID&quot;:&quot;7e252e60-761f-4da1-9d0f-8b122c741f44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an error if status is invalid&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes PUT /updateStatus/:tripId should return an error if status is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trip = await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .put(`/api/trips/updateStatus/${trip._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ status: &#x27;InvalidStatus&#x27; });\nexpect(res).to.have.status(400);\nexpect(res.body.message).to.equal(&#x27;Invalid status. Must be Upcoming, In Progress, or Completed&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89f6af7e-6b48-4fda-85be-a6ecc2fa5406&quot;,&quot;parentUUID&quot;:&quot;7e252e60-761f-4da1-9d0f-8b122c741f44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;180b4681-eca6-4dd5-9d7e-874cb2f3261c&quot;,&quot;89f6af7e-6b48-4fda-85be-a6ecc2fa5406&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:173,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;551856a7-4499-4f4e-8e94-c36e8cdb0780&quot;,&quot;title&quot;:&quot;DELETE /delete/:tripId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\trip.test.js&quot;,&quot;file&quot;:&quot;\\test\\trip.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a user&#x27;s trip&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes DELETE /delete/:tripId should delete a user&#x27;s trip&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const trip = await Trip.create({ userId: user._id, trailID: trail._id, startDate: new Date(), endDate: new Date(), time: 60, status: &#x27;Upcoming&#x27; });\nconst res = await chai.request(server)\n    .delete(`/api/trips/delete/${trip._id}`)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body.message).to.equal(&#x27;Trip deleted successfully&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;079819f3-27cc-4953-946d-57533988b66d&quot;,&quot;parentUUID&quot;:&quot;551856a7-4499-4f4e-8e94-c36e8cdb0780&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return error if trip not found&quot;,&quot;fullTitle&quot;:&quot;Trip API Routes DELETE /delete/:tripId should return error if trip not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(server)\n    .delete(&#x27;/api/trips/delete/60d7e14f7c411e6348f9f71d&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;Trip not found or not authorized&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba7358dd-ae55-4aaf-8f06-41d86c671c5d&quot;,&quot;parentUUID&quot;:&quot;551856a7-4499-4f4e-8e94-c36e8cdb0780&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;079819f3-27cc-4953-946d-57533988b66d&quot;,&quot;ba7358dd-ae55-4aaf-8f06-41d86c671c5d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;a855628d-eb9b-4c8f-8763-739c5904cea1&quot;,&quot;title&quot;:&quot;User API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;User API\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API \&quot;before all\&quot; hook in \&quot;User API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10a0954c-9949-4585-a48d-aa06faafa415&quot;,&quot;parentUUID&quot;:&quot;a855628d-eb9b-4c8f-8763-739c5904cea1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;User API\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API \&quot;after each\&quot; hook in \&quot;User API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.deleteMany({});\ntoken = null;\nuserId = null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;441fd7f9-2e70-4d51-bef1-379def8eb535&quot;,&quot;parentUUID&quot;:&quot;a855628d-eb9b-4c8f-8763-739c5904cea1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3d8d87f0-cf9d-4974-88b8-a62e52fce148&quot;,&quot;title&quot;:&quot;POST /register/auth&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new user and return token cookie&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/auth should register a new user and return token cookie&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:760,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/register/auth&#x27;)\n    .send({ email: &#x27;test@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;success&#x27;, true);\nexpect(res.body).to.have.property(&#x27;user&#x27;, &#x27;test@example.com&#x27;);\nexpect(res).to.have.cookie(&#x27;token&#x27;);\nconst user = await User.findOne({ email: &#x27;test@example.com&#x27; });\nexpect(user).to.exist;\nuserId = user._id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cfe2ecc-9fb7-4bd3-be76-d289524758ac&quot;,&quot;parentUUID&quot;:&quot;3d8d87f0-cf9d-4974-88b8-a62e52fce148&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not register without email or password&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/auth should not register without email or password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/register/auth&#x27;)\n    .send({ email: &#x27;&#x27; });\nexpect(res).to.have.status(400);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.message).to.equal(&#x27;Email and password are required&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba2f843c-786c-4fd8-835d-672ba117565a&quot;,&quot;parentUUID&quot;:&quot;3d8d87f0-cf9d-4974-88b8-a62e52fce148&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not register duplicate email&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/auth should not register duplicate email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:766,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await User.create({ email: &#x27;dup@example.com&#x27;, password: &#x27;password123&#x27; });\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/register/auth&#x27;)\n    .send({ email: &#x27;dup@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(500);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.error).to.include(&#x27;Email already registered&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09f29fb5-b21f-4a4e-9057-18bc8e947657&quot;,&quot;parentUUID&quot;:&quot;3d8d87f0-cf9d-4974-88b8-a62e52fce148&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9cfe2ecc-9fb7-4bd3-be76-d289524758ac&quot;,&quot;ba2f843c-786c-4fd8-835d-672ba117565a&quot;,&quot;09f29fb5-b21f-4a4e-9057-18bc8e947657&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1540,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;b37d5428-f348-4e61-9dd9-1a6fb1555720&quot;,&quot;title&quot;:&quot;POST /login/auth&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /login/auth\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth \&quot;before each\&quot; hook in \&quot;POST /login/auth\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:789,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;login@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ec716fd-4bbe-407b-bdf6-3bf33a9dd163&quot;,&quot;parentUUID&quot;:&quot;b37d5428-f348-4e61-9dd9-1a6fb1555720&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login with correct credentials and set token cookie&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth should login with correct credentials and set token cookie&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:773,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/login/auth&#x27;)\n    .send({ email: &#x27;login@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;success&#x27;, true);\nexpect(res.body.message).to.equal(&#x27;Login successful&#x27;);\nexpect(res.body.user).to.have.property(&#x27;email&#x27;, &#x27;login@example.com&#x27;);\nexpect(res).to.have.cookie(&#x27;token&#x27;);\ntoken = res.header[&#x27;set-cookie&#x27;][0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05efd8c3-3f89-46da-abce-d4199cf6da00&quot;,&quot;parentUUID&quot;:&quot;b37d5428-f348-4e61-9dd9-1a6fb1555720&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail login with invalid credentials&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth should fail login with invalid credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:854,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/login/auth&#x27;)\n    .send({ email: &#x27;login@example.com&#x27;, password: &#x27;wrongpass&#x27; });\nexpect(res).to.have.status(401);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.message).to.equal(&#x27;Invalid credentials&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54a1c529-55e5-46ff-81e2-b5b834d88f33&quot;,&quot;parentUUID&quot;:&quot;b37d5428-f348-4e61-9dd9-1a6fb1555720&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail login with non-existing user&quot;,&quot;fullTitle&quot;:&quot;User API POST /login/auth should fail login with non-existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/login/auth&#x27;)\n    .send({ email: &#x27;nouser@example.com&#x27;, password: &#x27;password123&#x27; });\nexpect(res).to.have.status(401);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);\nexpect(res.body.message).to.equal(&#x27;Invalid credentials&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88ceda73-f575-4467-83a4-0b77217f63a6&quot;,&quot;parentUUID&quot;:&quot;b37d5428-f348-4e61-9dd9-1a6fb1555720&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05efd8c3-3f89-46da-abce-d4199cf6da00&quot;,&quot;54a1c529-55e5-46ff-81e2-b5b834d88f33&quot;,&quot;88ceda73-f575-4467-83a4-0b77217f63a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1666,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;dc5a3648-bb1c-4872-af45-6ba1eab3de5a&quot;,&quot;title&quot;:&quot;GET /me&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;GET /me\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API GET /me \&quot;before each\&quot; hook in \&quot;GET /me\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:751,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;me@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();\nuserId = user._id;\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04454478-eb65-4e14-9f28-92a2256eb449&quot;,&quot;parentUUID&quot;:&quot;dc5a3648-bb1c-4872-af45-6ba1eab3de5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get current user info with valid token&quot;,&quot;fullTitle&quot;:&quot;User API GET /me should get current user info with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .get(&#x27;/api/users/me&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`);\nexpect(res).to.have.status(200);\nexpect(res.body).to.have.property(&#x27;email&#x27;, &#x27;me@example.com&#x27;);\nexpect(res.body).to.not.have.property(&#x27;password&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccd0533d-1737-4c88-8967-af86dff96e17&quot;,&quot;parentUUID&quot;:&quot;dc5a3648-bb1c-4872-af45-6ba1eab3de5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user does not exist&quot;,&quot;fullTitle&quot;:&quot;User API GET /me should return 404 if user does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeId = new mongoose.Types.ObjectId();\nconst fakeToken = jwt.sign({ id: fakeId, email: &#x27;fake@example.com&#x27; }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);\nconst res = await chai.request(app)\n    .get(&#x27;/api/users/me&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${fakeToken}`);\nexpect(res).to.have.status(404);\nexpect(res.body.message).to.equal(&#x27;User not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a013f326-29d7-4afe-bb14-0ff996c31f7c&quot;,&quot;parentUUID&quot;:&quot;dc5a3648-bb1c-4872-af45-6ba1eab3de5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 if no token provided&quot;,&quot;fullTitle&quot;:&quot;User API GET /me should return 401 if no token provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).get(&#x27;/api/users/me&#x27;);\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65336e05-de17-4fb8-9a53-f8443f810fec&quot;,&quot;parentUUID&quot;:&quot;dc5a3648-bb1c-4872-af45-6ba1eab3de5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccd0533d-1737-4c88-8967-af86dff96e17&quot;,&quot;a013f326-29d7-4afe-bb14-0ff996c31f7c&quot;,&quot;65336e05-de17-4fb8-9a53-f8443f810fec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:113,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;45a92206-24fe-4f55-86de-c80423fee5bf&quot;,&quot;title&quot;:&quot;POST /register/setup&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /register/setup\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/setup \&quot;before each\&quot; hook in \&quot;POST /register/setup\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:759,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;setup@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();\nuserId = user._id;\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa3df4dd-acba-4360-9880-62e197587cd7&quot;,&quot;parentUUID&quot;:&quot;45a92206-24fe-4f55-86de-c80423fee5bf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update user profile and mark profileCompleted&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/setup should update user profile and mark profileCompleted&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const profileData = {\n    firstName: &#x27;John&#x27;,\n    lastName: &#x27;Doe&#x27;,\n    badge: &#x27;Intermediate&#x27;,\n    gender: &#x27;male&#x27;,\n    nickname: &#x27;JD&#x27;,\n    country: &#x27;USA&#x27;,\n    gear: [{ category: &#x27;Clothing&#x27;, item: &#x27;Jacket&#x27; }],\n    visibility: &#x27;private&#x27;\n};\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/register/setup&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send(profileData);\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nconsole.log(res.body.user)\nconst resUser = res.body.user;\nexpect(resUser.firstName).to.equal(profileData.firstName);\nexpect(resUser.lastName).to.equal(profileData.lastName);\nexpect(resUser.badge).to.equal(profileData.badge);\nexpect(resUser.gender).to.equal(profileData.gender);\nexpect(resUser.nickname).to.equal(profileData.nickname);\nexpect(resUser.country).to.equal(profileData.country);\nexpect(resUser.visibility).to.equal(profileData.visibility);\nexpect(res.body.user.gear.length).to.deep.equal(profileData.gear.length);\nexpect(res.body.user.profileCompleted).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0b4fe8d-89f8-4c83-aba1-17e511b8722f&quot;,&quot;parentUUID&quot;:&quot;45a92206-24fe-4f55-86de-c80423fee5bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if user not found&quot;,&quot;fullTitle&quot;:&quot;User API POST /register/setup should return 500 if user not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeToken = jwt.sign({ id: new mongoose.Types.ObjectId(), email: &#x27;fake@example.com&#x27; }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/register/setup&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${fakeToken}`)\n    .send({ firstName: &#x27;Jane&#x27; });\nexpect(res).to.have.status(500);\nexpect(res.body.success).to.be.false;\nexpect(res.body.message).to.equal(&#x27;User not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30dce5af-d78c-40ec-a13d-8c3ada4850a3&quot;,&quot;parentUUID&quot;:&quot;45a92206-24fe-4f55-86de-c80423fee5bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0b4fe8d-89f8-4c83-aba1-17e511b8722f&quot;,&quot;30dce5af-d78c-40ec-a13d-8c3ada4850a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:129,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;1f8ba70f-5660-47ab-90cf-030a11d277cd&quot;,&quot;title&quot;:&quot;POST /logout&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should clear token cookie and logout successfully&quot;,&quot;fullTitle&quot;:&quot;User API POST /logout should clear token cookie and logout successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app).post(&#x27;/api/users/logout&#x27;);\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nexpect(res.body.message).to.equal(&#x27;Logged out successfully&#x27;);\nexpect(res.header[&#x27;set-cookie&#x27;][0]).to.include(&#x27;token=;&#x27;); // cleared cookie&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e42a082d-9858-465a-ac80-71f0719c595c&quot;,&quot;parentUUID&quot;:&quot;1f8ba70f-5660-47ab-90cf-030a11d277cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e42a082d-9858-465a-ac80-71f0719c595c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;b703a281-53f4-427c-9249-849df1eac3fa&quot;,&quot;title&quot;:&quot;POST /update/gear&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\test\\user.test.js&quot;,&quot;file&quot;:&quot;\\test\\user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /update/gear\&quot;&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear \&quot;before each\&quot; hook in \&quot;POST /update/gear\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:799,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const user = new User({ email: &#x27;gear@example.com&#x27;, password: &#x27;password123&#x27; });\nawait user.save();\nuserId = user._id;\ntoken = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fee57c3-08b6-45a6-81fc-4a09f68ee214&quot;,&quot;parentUUID&quot;:&quot;b703a281-53f4-427c-9249-849df1eac3fa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update user gear with valid token&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear should update user gear with valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const gearData = [{ category: &#x27;Electronics&#x27;, item: &#x27;GPS&#x27; }, { category: &#x27;Clothing&#x27;, item: &#x27;Hat&#x27; }];\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/update/gear&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${token}`)\n    .send({ gear: gearData });\nexpect(res).to.have.status(200);\nexpect(res.body.success).to.be.true;\nexpect(res.body.message).to.equal(&#x27;Gear updated successfully&#x27;);\nconsole.log(res.body.user.gear)\nconst returnedGear = res.body.user.gear.map(({ category, item }) =&gt; ({ category, item }));\nexpect(returnedGear).to.deep.equal(gearData);\n// expect(res.body.user.gear).to.deep.equal(gearData);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;944a21bf-cef2-4e2e-a9b4-f0ac85507bd9&quot;,&quot;parentUUID&quot;:&quot;b703a281-53f4-427c-9249-849df1eac3fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user not found&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear should return 404 if user not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeToken = jwt.sign({ id: new mongoose.Types.ObjectId(), email: &#x27;fake@example.com&#x27; }, process.env.JWT_SECRET || &#x27;testsecret&#x27;);\nconst res = await chai.request(app)\n    .post(&#x27;/api/users/update/gear&#x27;)\n    .set(&#x27;Cookie&#x27;, `token=${fakeToken}`)\n    .send({ gear: [] });\nexpect(res).to.have.status(404);\nexpect(res.body.success).to.be.false;\nexpect(res.body.message).to.equal(&#x27;User not found&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eca756c3-8d94-41f9-9afa-64644fa7f05a&quot;,&quot;parentUUID&quot;:&quot;b703a281-53f4-427c-9249-849df1eac3fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 if no token provided&quot;,&quot;fullTitle&quot;:&quot;User API POST /update/gear should return 401 if no token provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await chai.request(app)\n    .post(&#x27;/api/users/update/gear&#x27;)\n    .send({ gear: [] });\nexpect(res).to.have.status(401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0362b3f2-acc9-455b-b46d-5bf64b87e509&quot;,&quot;parentUUID&quot;:&quot;b703a281-53f4-427c-9249-849df1eac3fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;944a21bf-cef2-4e2e-a9b4-f0ac85507bd9&quot;,&quot;eca756c3-8d94-41f9-9afa-64644fa7f05a&quot;,&quot;0362b3f2-acc9-455b-b46d-5bf64b87e509&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:139,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:15000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.4.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\pranj\\IdeaProjects\\team26---\\backend\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>